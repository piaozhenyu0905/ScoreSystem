"use strict";(self["webpackChunkscoring_system_front"]=self["webpackChunkscoring_system_front"]||[]).push([[37],{8717:function(e,a,t){t.d(a,{A:function(){return p}});t(9138);var l=t(7616),o=t(5929),n=t(3e3),r=t(543),s=t(615);const c={class:"timeline-container"},u={class:"timeline-title"},v={class:"timeline-content"};var i={__name:"TimeLine",setup(e){const a=(0,n.KR)(2),t=(0,n.KR)([{title:"建立评估矩阵关系",description:"07.01-07.05"}]),i=()=>{(0,r.Q)().then((e=>{if(200===e.data.code){t.value=[];for(let l=0;l<=e.data.data.evaluateStep.length-1;l++){const o=e.data.data.evaluateStep[l].startDate.replace(/-/g,"."),n=e.data.data.evaluateStep[l].endDate.replace(/-/g,".");t.value.push({title:e.data.data.evaluateStep[l].description,description:`${o}-${n}`}),1===e.data.data.evaluateStep[l].enable&&(a.value=l)}}else console.log("获取失败！",e.data.msg)})).catch((e=>{console.log("获取失败！",e)}))},d=(0,n.KR)(""),m=()=>{(0,s.r)().then((e=>{200===e.data.code?d.value=e.data.data.title:message.error("获取失败！"+e.data.msg)})).catch((e=>{console.log("获取失败！",e)}))};return(0,l.sV)((()=>{i(),m()})),(e,n)=>{const r=(0,l.g2)("a-popover"),s=(0,l.g2)("a-steps");return(0,l.uX)(),(0,l.CE)("div",c,[(0,l.Lk)("span",u,(0,o.v_)(d.value)+"-评估流程时间节点",1),(0,l.Lk)("div",v,[(0,l.bF)(s,{current:a.value,"onUpdate:current":n[0]||(n[0]=e=>a.value=e),items:t.value,disabled:!0},{progressDot:(0,l.k6)((({index:e,status:a,prefixCls:t})=>[(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.Lk)("span",{class:(0,o.C4)(`${t}-icon-dot`)},null,2)])),_:2},1024)])),_:1},8,["current","items"])])])}}},d=t(3578);const m=(0,d.A)(i,[["__scopeId","data-v-566b31ef"]]);var p=m},6037:function(e,a,t){t.r(a),t.d(a,{default:function(){return W}});var l=t(7616),o=t(8717),n=t(5929),r=t(3e3),s=t(1836),c=t(615),u=t(5857);const v=()=>new Promise(((e,a)=>{(0,u.A)({method:"get",url:"/api/panel",headers:{"Content-Type":"application/json"}}).then((a=>{e(a)})).catch((e=>{a(e.response)}))}));var i=t(543);const d={class:"report-container"},m={class:"report-title"},p={key:0,class:"report-content"},h={class:"report-intro"},S={style:{"font-weight":"bolder","margin-bottom":"5px"}},y={style:{"text-indent":"2em"}},k={key:0,class:"report-result"},x={key:1,class:"report-result"},g={class:"radar-chart"},L={class:"chart-container"},f={key:1,class:"no-permission"};var _={__name:"GrowthReport",setup(e){const a=(0,r.KR)(!1),t=(0,r.KR)(),o=()=>{(0,i.Q)().then((e=>{if(200===e.data.code)for(let l=0;l<=e.data.data.evaluateStep.length-1;l++)1===e.data.data.evaluateStep[l].enable&&(t.value=l+1+"","4"===t.value&&(a.value=!0));else console.log("获取失败！"+e.data.msg)})).catch((e=>{console.log("获取失败！",e)}))},u=(0,r.KR)(null),_=(0,r.KR)(null),C=(0,r.KR)(localStorage.getItem("username")),R=(0,r.KR)(""),b=(0,r.KR)(""),K=(0,r.Kh)({personalScore:"",otherScore1:"",otherScore2:""}),w=(0,r.KR)(["",""]),E=(0,r.KR)([0,0,0,0,0,0,0,0,0]),z=(0,r.KR)([0,0,0,0,0,0,0,0,0]),B=(0,r.KR)([0,0,0,0,0,0,0,0,0]),W=()=>{(0,c.r)().then((e=>{200===e.data.code?(R.value=e.data.data.openingRemarks,b.value=e.data.data.title+" 个人成长报告"):console.log("获取失败！",e.data.msg)})).catch((e=>{console.log("获取失败！",e)}))},T=(0,r.KR)(),I=(0,r.KR)(),X=(0,r.KR)(),F=(0,r.KR)(!1),A=async()=>{try{const e=await v();200===e.data.code&&(w.value[0]=e.data.data.business,w.value[1]=e.data.data.lxyz,K.personalScore=e.data.data.totalScore,K.otherScore1=e.data.data.businessTotalScore,K.otherScore2=e.data.data.lxyzTotalScore,E.value=e.data.data.selfList,z.value=e.data.data.lxyzList,B.value=e.data.data.businessList,T.value=Math.max(...e.data.data.lxyzList),I.value=Math.max(...e.data.data.businessList),X.value=Math.max(...e.data.data.selfList),X.value>T.value&&(T.value=X.value),X.value>I.value&&(I.value=X.value),0===K.personalScore&&(F.value=!0),(0,l.dY)((()=>{D(),M()})))}catch(e){console.log("获取失败！",e)}},D=()=>{const e=document.querySelector(".radar-chart1"),a=s.Ts(e),t={title:{text:"个人得分 vs "+w.value[0]+"类平均得分",left:"center",textStyle:{color:"#333",fontSize:15}},legend:{data:["个人得分",w.value[0]+"类平均得分"],bottom:10,textStyle:{color:"#333",fontSize:12}},radar:{indicator:[{name:"开放进取 (O)",max:I.value},{name:"打胜仗 (W)",max:I.value},{name:"创新求实 (I)",max:I.value},{name:"信任互助 (T)",max:I.value},{name:"尊重平等 (R)",max:I.value},{name:"业精于勤 (D)",max:I.value},{name:"使命必达 (M)",max:I.value},{name:"五湖四海 (F)",max:I.value},{name:"坚持自省 (I)",max:I.value}],radius:"60%"},tooltip:{},series:[{name:"个人得分 vs "+w.value[0]+"类平均得分",type:"radar",data:[{value:E.value,name:"个人得分",itemStyle:{color:"#5087EC"},lineStyle:{color:"#5087EC"},areaStyle:{opacity:.1,color:"#5087EC"},label:{show:!0,color:"#5087EC",formatter:e=>e.value}},{value:B.value,name:w.value[0]+"类平均得分",itemStyle:{color:"#68BBC4"},lineStyle:{color:"#68BBC4"},areaStyle:{opacity:.1,color:"#68BBC4"},label:{show:!1}}]}]};a.setOption(t);const l=()=>{a.resize()};window.addEventListener("resize",l)},M=()=>{const e=document.querySelector(".radar-chart2"),a=s.Ts(e),t={title:{text:"个人得分 vs "+w.value[1]+"类平均得分",left:"center",textStyle:{color:"#333",fontSize:15}},tooltip:{},legend:{data:["个人得分",w.value[1]+"类平均得分"],bottom:10,textStyle:{color:"#333",fontSize:12}},radar:{indicator:[{name:"开放进取 (O)",max:T.value},{name:"打胜仗 (W)",max:T.value},{name:"创新求实 (I)",max:T.value},{name:"信任互助 (T)",max:T.value},{name:"尊重平等 (R)",max:T.value},{name:"业精于勤 (D)",max:T.value},{name:"使命必达 (M)",max:T.value},{name:"五湖四海 (F)",max:T.value},{name:"坚持自省 (I)",max:T.value}],radius:"60%"},series:[{name:"个人得分 vs "+w.value[1]+"类平均得分",type:"radar",data:[{value:E.value,name:"个人得分",itemStyle:{color:"#5087EC"},lineStyle:{color:"#5087EC"},areaStyle:{opacity:.1,color:"#5087EC"},label:{show:!0,color:"#5087EC",formatter:e=>e.value}},{value:z.value,name:w.value[1]+"类平均得分",itemStyle:{color:"#68BBC4"},lineStyle:{color:"#68BBC4"},areaStyle:{opacity:.1,color:"#68BBC4"},label:{show:!1}}]}]};a.setOption(t);const l=()=>{a.resize()};window.addEventListener("resize",l)},Q=(0,r.KR)(!0);return(0,l.sV)((async()=>{await Promise.all([o(),W()]),await new Promise((e=>setTimeout(e,500))),a&&(A(),Q.value=!1)})),(e,t)=>{const o=(0,l.g2)("a-spin"),r=(0,l.g2)("a-empty");return(0,l.uX)(),(0,l.CE)("div",d,[(0,l.Lk)("div",m,[(0,l.Lk)("span",null,(0,n.v_)(b.value),1)]),a.value?((0,l.uX)(),(0,l.CE)("div",p,[(0,l.Lk)("div",h,[(0,l.Lk)("p",S,"尊敬的"+(0,n.v_)(C.value)+"：",1),t[0]||(t[0]=(0,l.Lk)("p",{style:{"text-indent":"2em","margin-bottom":"5px"}},"您好！",-1)),(0,l.Lk)("p",y,(0,n.v_)(R.value),1)]),F.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",k,[(0,l.Lk)("p",null,[t[1]||(t[1]=(0,l.eW)("您本次评估得分为")),(0,l.Lk)("span",null,(0,n.v_)(K.personalScore),1),t[2]||(t[2]=(0,l.eW)("，公司")),(0,l.Lk)("span",null,(0,n.v_)(w.value[0]),1),t[3]||(t[3]=(0,l.eW)("人员平均得分为")),(0,l.Lk)("span",null,(0,n.v_)(K.otherScore1),1),t[4]||(t[4]=(0,l.eW)("，公司")),(0,l.Lk)("span",null,(0,n.v_)(w.value[1]),1),t[5]||(t[5]=(0,l.eW)("群体平均得分为")),(0,l.Lk)("span",null,(0,n.v_)(K.otherScore2),1)])])),F.value?((0,l.uX)(),(0,l.CE)("div",x,[(0,l.Lk)("p",null,[t[6]||(t[6]=(0,l.eW)("您未参与本次评估，公司")),(0,l.Lk)("span",null,(0,n.v_)(w.value[0]),1),t[7]||(t[7]=(0,l.eW)("人员平均得分为")),(0,l.Lk)("span",null,(0,n.v_)(K.otherScore1),1),t[8]||(t[8]=(0,l.eW)("，公司")),(0,l.Lk)("span",null,(0,n.v_)(w.value[1]),1),t[9]||(t[9]=(0,l.eW)("群体平均得分为")),(0,l.Lk)("span",null,(0,n.v_)(K.otherScore2),1)])])):(0,l.Q3)("",!0),(0,l.Lk)("div",g,[Q.value&&a.value?((0,l.uX)(),(0,l.Wv)(o,{key:0,tip:"结果查询中...",size:"large",class:"spin-container"})):(0,l.Q3)("",!0),(0,l.Lk)("div",L,[(0,l.Lk)("div",{ref_key:"chartRef1",ref:u,class:"radar-chart1"},null,512),(0,l.Lk)("div",{ref_key:"chartRef2",ref:_,class:"radar-chart2"},null,512)])])])):((0,l.uX)(),(0,l.CE)("div",f,[(0,l.bF)(r,{description:"还未发布本轮评估结果0~0"})]))])}}},C=t(3578);const R=(0,C.A)(_,[["__scopeId","data-v-5dfed8a4"]]);var b=R;const K={class:"personal-score"},w={class:"time-line"},E={class:"growth-report"};var z={__name:"PersonalScore",setup(e){return(e,a)=>((0,l.uX)(),(0,l.CE)("div",K,[(0,l.Lk)("div",w,[(0,l.bF)(o.A)]),(0,l.Lk)("div",E,[(0,l.bF)(b)])]))}};const B=(0,C.A)(z,[["__scopeId","data-v-7eccc4c4"]]);var W=B}}]);
//# sourceMappingURL=37.23352b9e.js.map