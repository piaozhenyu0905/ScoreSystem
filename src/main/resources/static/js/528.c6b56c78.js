"use strict";(self["webpackChunkscoring_system_front"]=self["webpackChunkscoring_system_front"]||[]).push([[528],{3422:function(e,a,t){t.d(a,{A:function(){return m}});t(9138);var l=t(5115),s=t(9650),u=t(9675),i=t(543);const n={class:"timeline-container"},d={class:"timeline-content"};var o={__name:"TimeLine",setup(e){const a=(0,u.KR)(2),t=(0,u.KR)([{title:"建立评估矩阵关系",description:"07.01-07.05"}]),o=()=>{(0,i.Q)().then((e=>{if(200===e.data.code){t.value=[];for(let l=0;l<=e.data.data.evaluateStep.length-1;l++){const s=e.data.data.evaluateStep[l].startDate.replace(/-/g,"."),u=e.data.data.evaluateStep[l].endDate.replace(/-/g,".");t.value.push({title:e.data.data.evaluateStep[l].description,description:`${s}-${u}`}),1===e.data.data.evaluateStep[l].enable&&(a.value=l)}}else console.log("获取失败！",e.data.msg)})).catch((e=>{console.log("获取失败！",e)}))};return(0,l.sV)((()=>{o()})),(e,u)=>{const i=(0,l.g2)("a-popover"),o=(0,l.g2)("a-steps");return(0,l.uX)(),(0,l.CE)("div",n,[u[1]||(u[1]=(0,l.Lk)("span",{class:"timeline-title"},"本轮评估流程时间节点",-1)),(0,l.Lk)("div",d,[(0,l.bF)(o,{current:a.value,"onUpdate:current":u[0]||(u[0]=e=>a.value=e),items:t.value,disabled:!0},{progressDot:(0,l.k6)((({index:e,status:a,prefixCls:t})=>[(0,l.bF)(i,null,{default:(0,l.k6)((()=>[(0,l.Lk)("span",{class:(0,s.C4)(`${t}-icon-dot`)},null,2)])),_:2},1024)])),_:1},8,["current","items"])])])}}},r=t(2965);const c=(0,r.A)(o,[["__scopeId","data-v-286cdc00"]]);var m=c},7528:function(e,a,t){t.r(a),t.d(a,{default:function(){return D}});var l=t(5115),s=t(3422),u=t(9675),i=t(7281),n=t(5974),d=t(3369),o=t.n(d),r=t(3771),c=t(543);const m={class:"timeset-container"},v={class:"timeset-header"},p={class:"btn-area"},b={class:"timeset-content"},g={class:"timeset-area"},k={class:"save-btn"};var f={__name:"TimeSet",setup(e){const a=(0,u.Kh)({relBuildingTime:[o()("2024-01-01"),o()("2024-01-02")],evaluationTime:[o()("2024-01-05"),o()("2024-01-10")],resCommunicaTime:[o()("2024-02-01"),o()("2024-02-05")],resultReleaseTime:[o()("2024-03-01"),o()("2024-03-05")]}),t=(0,u.KR)("0"),s=(0,u.KR)(!1),d=()=>{s.value=!s.value,t.value="1"},f=()=>{s.value=!s.value,t.value="2"},T=()=>{(0,c.Q)().then((e=>{200===e.data.code?(a.relBuildingTime=[o()(e.data.data.evaluateStep[0].startDate),o()(e.data.data.evaluateStep[0].endDate)],a.evaluationTime=[o()(e.data.data.evaluateStep[1].startDate),o()(e.data.data.evaluateStep[1].endDate)],a.resCommunicaTime=[o()(e.data.data.evaluateStep[2].startDate),o()(e.data.data.evaluateStep[2].endDate)],a.resultReleaseTime=[o()(e.data.data.evaluateStep[3].startDate),o()(e.data.data.evaluateStep[3].endDate)]):console.log("获取失败！",e.data.msg)})).catch((e=>{console.log("获取失败！",e)}))},_=()=>{const e=(0,u.KR)("");"1"===t.value?e.value="确定要发布新一轮评估吗？":"2"===t.value?e.value="确定要修改评估时间吗？":e.value="undefined";const d=a.relBuildingTime&&a.evaluationTime&&a.resCommunicaTime&&a.resultReleaseTime;d?i.A.confirm({title:e.value,icon:(0,l.bF)(n.A),onOk(){const e=[...a.relBuildingTime.map((e=>e.format("YYYY-MM-DD"))),...a.evaluationTime.map((e=>e.format("YYYY-MM-DD"))),...a.resCommunicaTime.map((e=>e.format("YYYY-MM-DD"))),...a.resultReleaseTime.map((e=>e.format("YYYY-MM-DD")))];"1"===t.value?(0,c.a)(!0,e).then((e=>{200===e.data.code?(r.Ay.success("发布成功！"),setTimeout((()=>{location.reload()}),500)):(r.Ay.error("发布失败！"+e.data.msg),setTimeout((()=>{location.reload()}),500))})).catch((e=>{console.log(e)})):(0,c.a)(!1,e).then((e=>{200===e.data.code?(r.Ay.success("修改成功！"),setTimeout((()=>{location.reload()}),500)):(r.Ay.error("修改失败！"+e.data.msg),setTimeout((()=>{location.reload()}),500))})).catch((e=>{console.log(e)})),s.value=!1},onCancel(){}}):r.Ay.warning("请将所有时间填写完整哦~")};return(0,l.sV)((()=>{T()})),(e,t)=>{const u=(0,l.g2)("a-button"),i=(0,l.g2)("a-range-picker"),n=(0,l.g2)("a-form-item"),o=(0,l.g2)("a-col"),r=(0,l.g2)("a-row"),c=(0,l.g2)("a-form");return(0,l.uX)(),(0,l.CE)("div",m,[(0,l.Lk)("div",v,[t[6]||(t[6]=(0,l.Lk)("span",{class:"timeset-title"},"设置评估流程时间节点",-1)),(0,l.Lk)("div",p,[(0,l.bF)(u,{type:"primary",onClick:d,style:{"background-color":"#68BBC4"}},{default:(0,l.k6)((()=>t[4]||(t[4]=[(0,l.eW)("发布新一轮评估时间")]))),_:1}),(0,l.bF)(u,{type:"primary",onClick:f,ghost:""},{default:(0,l.k6)((()=>t[5]||(t[5]=[(0,l.eW)("修改当前时间节点")]))),_:1})])]),(0,l.Lk)("div",b,[(0,l.Lk)("div",g,[(0,l.bF)(c,null,{default:(0,l.k6)((()=>[(0,l.bF)(r,{gutter:20},{default:(0,l.k6)((()=>[(0,l.bF)(o,{span:10},{default:(0,l.k6)((()=>[(0,l.bF)(n,{label:"建立评估矩阵关系",rules:[{required:!0,message:"请填写！"}]},{default:(0,l.k6)((()=>[(0,l.bF)(i,{value:a.relBuildingTime,"onUpdate:value":t[0]||(t[0]=e=>a.relBuildingTime=e),disabled:!s.value,style:{width:"250px"}},null,8,["value","disabled"])])),_:1})])),_:1}),(0,l.bF)(o,{span:10},{default:(0,l.k6)((()=>[(0,l.bF)(n,{label:"上级评估/周边评估",rules:[{required:!0,message:"请填写！"}]},{default:(0,l.k6)((()=>[(0,l.bF)(i,{value:a.evaluationTime,"onUpdate:value":t[1]||(t[1]=e=>a.evaluationTime=e),disabled:!s.value,style:{width:"250px"}},null,8,["value","disabled"])])),_:1})])),_:1})])),_:1}),(0,l.bF)(r,{gutter:20},{default:(0,l.k6)((()=>[(0,l.bF)(o,{span:10},{default:(0,l.k6)((()=>[(0,l.bF)(n,{label:"结果沟通",rules:[{required:!0,message:"请填写！"}]},{default:(0,l.k6)((()=>[(0,l.bF)(i,{value:a.resCommunicaTime,"onUpdate:value":t[2]||(t[2]=e=>a.resCommunicaTime=e),disabled:!s.value,style:{width:"250px"}},null,8,["value","disabled"])])),_:1})])),_:1}),(0,l.bF)(o,{span:10},{default:(0,l.k6)((()=>[(0,l.bF)(n,{label:"结果发布",rules:[{required:!0,message:"请填写！"}]},{default:(0,l.k6)((()=>[(0,l.bF)(i,{value:a.resultReleaseTime,"onUpdate:value":t[3]||(t[3]=e=>a.resultReleaseTime=e),disabled:!s.value,style:{width:"250px"}},null,8,["value","disabled"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Lk)("div",k,[s.value?((0,l.uX)(),(0,l.Wv)(u,{key:0,type:"primary","html-type":"submit",onClick:_},{default:(0,l.k6)((()=>t[7]||(t[7]=[(0,l.eW)("发布 / 修改")]))),_:1})):(0,l.Q3)("",!0)])])])])}}},T=t(2965);const _=(0,T.A)(f,[["__scopeId","data-v-2c263ec8"]]);var F=_,h={__name:"ScoringTimeSet",setup(e){return(e,a)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",null,[(0,l.bF)(s.A)]),(0,l.Lk)("div",null,[(0,l.bF)(F)])],64))}};const y=h;var D=y}}]);
//# sourceMappingURL=528.c6b56c78.js.map