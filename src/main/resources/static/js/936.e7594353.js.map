{"version":3,"file":"js/936.e7594353.js","mappings":"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","sources":["webpack://scoring_system_front/./src/api/headnote.js","webpack://scoring_system_front/./src/api/quesnaireEdit.js","webpack://scoring_system_front/./src/page/ordinary/QuesnaireEdit.vue","webpack://scoring_system_front/./src/page/ordinary/QuesnaireEdit.vue?075b"],"sourcesContent":["import axios from \"axios\";\n\n//获取该时间段内的执行情况数据\nconst getHeadnoteApi = () =>\n  new Promise((resolve, reject) => {\n    axios({\n      method: \"get\",\n      url: \"/api/evaluate/table\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((response) => {\n        resolve(response);\n      })\n      .catch((error) => {\n        reject(error.response);\n      });\n  });\n\n//获取该时间段内的执行情况数据\nconst getHeadnoteUpdateApi = (meanings, principles, openingRemarks, title) =>\n  new Promise((resolve, reject) => {\n    let data = {\n      meanings: meanings,\n      principles: principles,\n      openingRemarks: openingRemarks,\n      title: title\n    };\n    axios({\n      method: \"post\",\n      url: \"/api/evaluate/table/update\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      data: JSON.stringify(data),\n    })\n      .then((response) => {\n        resolve(response);\n      })\n      .catch((error) => {\n        reject(error.response);\n      });\n  });\n\nexport { getHeadnoteApi, getHeadnoteUpdateApi };\n","import axios from \"axios\";\n\n//获取该时间段内的执行情况数据\nconst getQuesnaireEditApi = (todoListId, tickSet) => new Promise((resolve, reject) =>{\n    let data = {\n        todoListId: todoListId,\n        tickSet: tickSet,\n      };\n    axios({\n        method:'post',\n        url:'/api/todolist/tick',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n        data: JSON.stringify(data),\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\nexport{\n    getQuesnaireEditApi\n}","<!-- 普通用户--填写评分问卷页面 -->\n<template>\n    <div class=\"main\">\n        <div class=\"quesTitle\">\n            <span class=\"title\">{{ reportTitle }}-成长评估表</span>\n            <span class=\"headNote\">\n                <span>{{ cultureText }}本需求旨在设计一个成长评估系统，将上述文化九条作为评估依据，实现公司内部人员的交叉互评。在填写下面评估表时，</span>\n                <span style=\"font-weight: bold;\">请您遵守以下原则：</span>\n                <span>{{ evalPrinciple }}</span>\n            </span>\n            <span class=\"evaluation\">您当前的评估对象为：</span><span class=\"evaluationName\">{{ evaluatedName }} / {{\n                department }}部</span>\n        </div>\n        <div class=\"quesContent\">\n            <a-form :model=\"formState\" name=\"basic\" autocomplete=\"off\">\n\n                <a-form-item v-for=\"(question, index) in questions\" :key=\"question\" :label=\"'维度' + (index + 1)\"\n                    :name=\"'question' + index\" :rules=\"[{ required: true, message: '' }]\">\n                    <div class=\"questionTitle\">{{ question }}</div>\n                    <div class=\"questionOptions\">\n                        <a-radio-group v-model:value=\"formState[index]\">\n                            <a-radio v-for=\"(option, optionIndex) in options\" :value=\"optionIndex\" :key=\"option\"\n                                style=\"font-size: 16px; line-height: 40px; width: 200px;\">\n                                {{ option }}\n                            </a-radio>\n                        </a-radio-group>\n                    </div> \n                </a-form-item>\n\n                <a-form-item class=\"submitBtn\">\n                    <a-button type=\"primary\" @click=\"handleSubmit\" style=\"margin-right: 30px;\">确认</a-button>\n                    <a-button type=\"primary\" ghost @click=\"jumpToList\">取消</a-button>\n                </a-form-item>\n            </a-form>\n        </div>\n    </div>\n</template>\n\n<script setup>\nimport { onMounted, ref } from \"vue\"\nimport { message } from 'ant-design-vue'\nimport { useRouter } from 'vue-router';\nimport { getQuesnaireEditApi } from '@/api/quesnaireEdit'\nimport { getHeadnoteApi } from \"@/api/headnote\";\n\nonMounted(() => {\n    getHeadnote()\n})\n\n// 从session中获取被评估人信息\nconst evaluatedName = ref(sessionStorage.getItem('evaluatedName'))\nconst department = ref(sessionStorage.getItem('department'))\nconst todoListId = sessionStorage.getItem('todoListId')\n\nconst router = useRouter();\nconst formState = ref(['', '', '', '', '', '', '', '', ''])\nconst questions = ref(['思想上：开放进取（O）', '作风上：把打胜仗作为信仰（W）', '业务上：创新求实（I）', '工作中：信任互助（H）', '员工间：尊重平等（R）', '行为上：业精于勤（D）', '执行力：使命必达（M）', '团队上：五湖四海（F）', '成长上：坚持自省（I）'])\nconst options = ref(['成为榜样（5分）', '成为习惯（4.5分）', '经常正感知（4分）', '偶尔正感知（3.5分）', '无感知（3分）', '偶尔负感知（2.5分）', '经常负感知（2分）'])\n// 映射规则\nconst scoreMap = {\n    0: 5,\n    1: 4.5,\n    2: 4,\n    3: 3.5,\n    4: 3,\n    5: 2.5,\n    6: 2\n};\n// 调用api-提交用户填写的问卷数据\nconst handleSubmit = () => {\n    // 如果formState列表中不存在空字符串，则提交数据\n    if (formState.value.indexOf('') === -1) {\n        // 使用 Array.map() 来映射每个值\n        const tickSet = Array.from(formState.value).map(value => scoreMap[value] || value); \n        getQuesnaireEditApi(todoListId, tickSet).then(res => {\n            if (res.data.code === 200) {\n                message.success(\"提交成功！^_^\")\n                if(localStorage.getItem('userRole')==='0'){\n                    router.push({ path: '/todoList' })\n                }else{\n                    router.push({ path: '/todoListAd' })\n                }\n            } else {\n                message.error(\"提交失败！\" + res.data.msg)\n            }\n        }).catch((err) => {\n            console.log(err)\n        })\n    } else {\n        message.error('请再次检查评估表是否填写完整！');\n    }\n}\nconst jumpToList = () => {\n    if(localStorage.getItem('userRole')==='0'){\n        router.push({ path: '/todoList' })\n    }else{\n        router.push({ path: '/todoListAd' })\n    }\n}\n// 获取卷首信息\nconst cultureText = ref('')\nconst evalPrinciple = ref('')\nconst reportTitle = ref('')\nconst getHeadnote = () => {\n    getHeadnoteApi().then(res => {\n        if(res.data.code === 200){\n            cultureText.value = res.data.data.meanings\n            evalPrinciple.value = res.data.data.principles\n            reportTitle.value = res.data.data.title\n        }else{\n            message.error(\"获取失败！\" + res.data.msg);\n        }\n    }).catch(err => {\n        console.log('获取失败！',err);\n    })\n}\n</script>\n\n<style lang=\"less\" scoped>\n.main {\n    max-height: 80vh; // 设置最大高度为视口高度的80%\n    overflow-y: auto; // 超过最大高度时在Y轴显示滚动条\n\n    .quesTitle {\n        width: 100%;\n\n        .title {\n            display: block;\n            width: 100%;\n            font-size: 20px;\n            font-weight: bold;\n            margin-top: 15px;\n            margin-bottom: 15px;\n            text-align: center;\n        }\n\n        .headNote {\n            display: block;\n            font-size: 16px;\n            line-height: 25px;\n            text-align: justify; // 两端对齐\n            margin-left: 35px;\n            margin-right: 35px;\n            text-indent: 2em; // 首行缩进2个字符\n        }\n\n        .evaluation {\n            font-size: 16px;\n            display: inline-block;\n            color: #3F90F5;\n            font-weight: bold;\n            margin: 20px 0 20px 35px;\n        }\n\n        .evaluationName {\n            font-size: 16px;\n        }\n    }\n\n    .quesContent {\n        margin-left: 35px;\n        margin-right: 35px;\n\n        :deep(.ant-form-item-label > label) {\n            font-size: 16px;\n            font-weight: bold;\n            margin-right: 10px;\n        }\n\n        .questionTitle {\n            font-size: 16px;\n            line-height: 35px;\n            background-color: #C7DBF2;\n            width: auto;\n            border-radius: 10px;\n            padding-left: 15px;\n        }\n\n        .questionOptions {\n            padding-right: 150px;\n        }\n\n        .submitBtn {\n            margin-top: 30px;\n            text-align: center;\n        }\n    }\n}\n</style>","import script from \"./QuesnaireEdit.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./QuesnaireEdit.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./QuesnaireEdit.vue?vue&type=style&index=0&id=745d774d&lang=less&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.10_webpack@5.95.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-745d774d\"]])\n\nexport default __exports__"],"names":["getHeadnoteApi","Promise","resolve","reject","axios","method","url","headers","then","response","catch","error","getHeadnoteUpdateApi","meanings","principles","openingRemarks","title","data","JSON","stringify","getQuesnaireEditApi","todoListId","tickSet","onMounted","getHeadnote","evaluatedName","ref","sessionStorage","getItem","department","router","useRouter","formState","questions","options","scoreMap","handleSubmit","value","indexOf","Array","from","map","res","code","message","success","localStorage","push","path","msg","err","console","log","jumpToList","cultureText","evalPrinciple","reportTitle","__exports__"],"sourceRoot":""}