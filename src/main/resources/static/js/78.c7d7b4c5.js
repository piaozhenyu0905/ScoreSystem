"use strict";(self["webpackChunkscoring_system_front"]=self["webpackChunkscoring_system_front"]||[]).push([[78],{3422:function(e,a,t){t.d(a,{A:function(){return v}});t(9138);var l=t(5115),u=t(9650),s=t(9675),n=t(543);const i={class:"timeline-container"},d={class:"timeline-content"};var o={__name:"TimeLine",setup(e){const a=(0,s.KR)(2),t=(0,s.KR)([{title:"建立评估矩阵关系",description:"07.01-07.05"}]),o=()=>{(0,n.Q)().then((e=>{if(200===e.data.code){t.value=[];for(let l=0;l<=e.data.data.evaluateStep.length-1;l++){const u=e.data.data.evaluateStep[l].startDate.replace(/-/g,"."),s=e.data.data.evaluateStep[l].endDate.replace(/-/g,".");t.value.push({title:e.data.data.evaluateStep[l].description,description:`${u}-${s}`}),1===e.data.data.evaluateStep[l].enable&&(a.value=l)}}else console.log("获取失败！",e.data.msg)})).catch((e=>{console.log("获取失败！",e)}))};return(0,l.sV)((()=>{o()})),(e,s)=>{const n=(0,l.g2)("a-popover"),o=(0,l.g2)("a-steps");return(0,l.uX)(),(0,l.CE)("div",i,[s[1]||(s[1]=(0,l.Lk)("span",{class:"timeline-title"},"本轮评估流程时间节点",-1)),(0,l.Lk)("div",d,[(0,l.bF)(o,{current:a.value,"onUpdate:current":s[0]||(s[0]=e=>a.value=e),items:t.value,disabled:!0},{progressDot:(0,l.k6)((({index:e,status:a,prefixCls:t})=>[(0,l.bF)(n,null,{default:(0,l.k6)((()=>[(0,l.Lk)("span",{class:(0,u.C4)(`${t}-icon-dot`)},null,2)])),_:2},1024)])),_:1},8,["current","items"])])])}}},r=t(2965);const c=(0,r.A)(o,[["__scopeId","data-v-286cdc00"]]);var v=c},6078:function(e,a,t){t.r(a),t.d(a,{default:function(){return D}});var l=t(5115),u=t(3422),s=t(9675),n=t(7281),i=t(5974),d=t(3369),o=t.n(d),r=t(3771),c=t(543);const v={class:"timeset-container"},m={class:"timeset-header"},p={class:"btn-area"},b={class:"timeset-content"},g={class:"timeset-area"},k={class:"save-btn"};var f={__name:"TimeSet",setup(e){const a=(0,s.KR)(!1),t=(0,s.KR)(""),u=()=>{""!==t.value?(a.value=!1,r.Ay.success("名称设置成功，请继续设置时间节点！"),!0===T.value||(T.value=!T.value),f.value="1"):r.Ay.warning("请输入评估周期名称！")},d=(0,s.Kh)({relBuildingTime:[o()("2024-01-01"),o()("2024-01-02")],evaluationTime:[o()("2024-01-05"),o()("2024-01-10")],resCommunicaTime:[o()("2024-02-01"),o()("2024-02-05")],resultReleaseTime:[o()("2024-03-01"),o()("2024-03-05")]}),f=(0,s.KR)("0"),T=(0,s.KR)(!1),_=()=>{a.value=!0},F=()=>{T.value=!T.value,f.value="2"},h=()=>{(0,c.Q)().then((e=>{200===e.data.code?(d.relBuildingTime=[o()(e.data.data.evaluateStep[0].startDate),o()(e.data.data.evaluateStep[0].endDate)],d.evaluationTime=[o()(e.data.data.evaluateStep[1].startDate),o()(e.data.data.evaluateStep[1].endDate)],d.resCommunicaTime=[o()(e.data.data.evaluateStep[2].startDate),o()(e.data.data.evaluateStep[2].endDate)],d.resultReleaseTime=[o()(e.data.data.evaluateStep[3].startDate),o()(e.data.data.evaluateStep[3].endDate)]):console.log("获取失败！",e.data.msg)})).catch((e=>{console.log("获取失败！",e)}))},y=()=>{const e=(0,s.KR)("");"1"===f.value?e.value="确定要发布新一轮评估吗？":"2"===f.value?e.value="确定要修改评估时间吗？":e.value="undefined";const a=d.relBuildingTime&&d.evaluationTime&&d.resCommunicaTime&&d.resultReleaseTime;a?n.A.confirm({title:e.value,icon:(0,l.bF)(i.A),onOk(){const e=[...d.relBuildingTime.map((e=>e.format("YYYY-MM-DD"))),...d.evaluationTime.map((e=>e.format("YYYY-MM-DD"))),...d.resCommunicaTime.map((e=>e.format("YYYY-MM-DD"))),...d.resultReleaseTime.map((e=>e.format("YYYY-MM-DD")))];"1"===f.value?(0,c.a)(!0,e,t.value).then((e=>{200===e.data.code?(r.Ay.success("发布成功！"),setTimeout((()=>{location.reload()}),500)):(r.Ay.error("发布失败！"+e.data.msg),setTimeout((()=>{location.reload()}),500))})).catch((e=>{console.log(e)})):(0,c.a)(!1,e).then((e=>{200===e.data.code?(r.Ay.success("修改成功！"),setTimeout((()=>{location.reload()}),500)):(r.Ay.error("修改失败！"+e.data.msg),setTimeout((()=>{location.reload()}),500))})).catch((e=>{console.log(e)})),T.value=!1},onCancel(){}}):r.Ay.warning("请将所有时间填写完整哦~")};return(0,l.sV)((()=>{h()})),(e,s)=>{const n=(0,l.g2)("a-button"),i=(0,l.g2)("a-input"),o=(0,l.g2)("a-modal"),r=(0,l.g2)("a-range-picker"),c=(0,l.g2)("a-form-item"),f=(0,l.g2)("a-col"),h=(0,l.g2)("a-row"),D=(0,l.g2)("a-form");return(0,l.uX)(),(0,l.CE)("div",v,[(0,l.Lk)("div",m,[s[8]||(s[8]=(0,l.Lk)("span",{class:"timeset-title"},"设置评估流程时间节点",-1)),(0,l.Lk)("div",p,[(0,l.bF)(n,{type:"primary",onClick:_,style:{"background-color":"#68BBC4"}},{default:(0,l.k6)((()=>s[6]||(s[6]=[(0,l.eW)("发布新一轮评估时间")]))),_:1}),(0,l.bF)(o,{open:a.value,"onUpdate:open":s[1]||(s[1]=e=>a.value=e),title:"定义本轮评估名称",okText:"开始设置评估时间",onOk:u},{default:(0,l.k6)((()=>[(0,l.bF)(i,{value:t.value,"onUpdate:value":s[0]||(s[0]=e=>t.value=e),placeholder:"例如：2023-2024年第一期评估"},null,8,["value"])])),_:1},8,["open"]),(0,l.bF)(n,{type:"primary",onClick:F,ghost:""},{default:(0,l.k6)((()=>s[7]||(s[7]=[(0,l.eW)("修改当前时间节点")]))),_:1})])]),(0,l.Lk)("div",b,[(0,l.Lk)("div",g,[(0,l.bF)(D,null,{default:(0,l.k6)((()=>[(0,l.bF)(h,{gutter:20},{default:(0,l.k6)((()=>[(0,l.bF)(f,{span:10},{default:(0,l.k6)((()=>[(0,l.bF)(c,{label:"建立评估矩阵关系",rules:[{required:!0,message:"请填写！"}]},{default:(0,l.k6)((()=>[(0,l.bF)(r,{value:d.relBuildingTime,"onUpdate:value":s[2]||(s[2]=e=>d.relBuildingTime=e),disabled:!T.value,style:{width:"250px"}},null,8,["value","disabled"])])),_:1})])),_:1}),(0,l.bF)(f,{span:10},{default:(0,l.k6)((()=>[(0,l.bF)(c,{label:"上级评估/周边评估",rules:[{required:!0,message:"请填写！"}]},{default:(0,l.k6)((()=>[(0,l.bF)(r,{value:d.evaluationTime,"onUpdate:value":s[3]||(s[3]=e=>d.evaluationTime=e),disabled:!T.value,style:{width:"250px"}},null,8,["value","disabled"])])),_:1})])),_:1})])),_:1}),(0,l.bF)(h,{gutter:20},{default:(0,l.k6)((()=>[(0,l.bF)(f,{span:10},{default:(0,l.k6)((()=>[(0,l.bF)(c,{label:"结果沟通",rules:[{required:!0,message:"请填写！"}]},{default:(0,l.k6)((()=>[(0,l.bF)(r,{value:d.resCommunicaTime,"onUpdate:value":s[4]||(s[4]=e=>d.resCommunicaTime=e),disabled:!T.value,style:{width:"250px"}},null,8,["value","disabled"])])),_:1})])),_:1}),(0,l.bF)(f,{span:10},{default:(0,l.k6)((()=>[(0,l.bF)(c,{label:"结果发布",rules:[{required:!0,message:"请填写！"}]},{default:(0,l.k6)((()=>[(0,l.bF)(r,{value:d.resultReleaseTime,"onUpdate:value":s[5]||(s[5]=e=>d.resultReleaseTime=e),disabled:!T.value,style:{width:"250px"}},null,8,["value","disabled"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,l.Lk)("div",k,[T.value?((0,l.uX)(),(0,l.Wv)(n,{key:0,type:"primary","html-type":"submit",onClick:y},{default:(0,l.k6)((()=>s[9]||(s[9]=[(0,l.eW)("发布 / 修改")]))),_:1})):(0,l.Q3)("",!0)])])])])}}},T=t(2965);const _=(0,T.A)(f,[["__scopeId","data-v-5b7ffdf0"]]);var F=_,h={__name:"ScoringTimeSet",setup(e){return(e,a)=>((0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",null,[(0,l.bF)(u.A)]),(0,l.Lk)("div",null,[(0,l.bF)(F)])],64))}};const y=h;var D=y}}]);
//# sourceMappingURL=78.c7d7b4c5.js.map