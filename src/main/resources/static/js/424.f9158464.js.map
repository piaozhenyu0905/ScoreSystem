{"version":3,"file":"js/424.f9158464.js","mappings":"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","sources":["webpack://scoring_system_front/./src/api/personalInfo.js","webpack://scoring_system_front/./src/api/userManage.js","webpack://scoring_system_front/./src/components/PersonalInfoEdit.vue","webpack://scoring_system_front/./src/components/PersonalInfoEdit.vue?7f41","webpack://scoring_system_front/./src/page/ordinary/PersonalInfo.vue"],"sourcesContent":["import axios from \"axios\";\n\n// 查看个人信息\nconst getPersonalInfoApi = () => new Promise((resolve, reject) =>{\n    axios({\n        method:'get',\n        url:'/api/basicInfo',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\n// 修改密码\nconst getUpdatePasswordApi = (oldPassword, newPassword) => new Promise((resolve, reject) =>{\n    let data = {\n        oldPassword: oldPassword,\n        newPassword: newPassword,\n    };\n    axios({\n        method:'post',\n        url:'/api/update/password',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n    data: JSON.stringify(data),\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\n// 修改个人信息(管理员)\nconst getEditPersonalInfoApi = (personalInfo, hireDateNew) => new Promise((resolve, reject) =>{\n    let data = {\n        id: personalInfo.id,\n        name: personalInfo.name,\n        username: personalInfo.username,\n        workNum: personalInfo.workNum,\n        department: personalInfo.department,\n        supervisor1: personalInfo.supervisor1,\n        supervisor2: personalInfo.supervisor2,\n        supervisor3: personalInfo.supervisor3,\n        hr: personalInfo.hr,\n        superAdmin: personalInfo.superAdmin,\n        firstAdmin: personalInfo.firstAdmin,\n        secondAdmin: personalInfo.secondAdmin,\n        hireDate: hireDateNew,\n        residence: personalInfo.residence,\n        phoneNumber: personalInfo.phoneNumber,\n        email: personalInfo.email,\n        businessType: personalInfo.businessType,\n        lxyz: personalInfo.lxyz,\n        role: personalInfo.role,\n        password: personalInfo.password\n    };\n    axios({\n        method:'post',\n        url:'/api/update/selfInfo',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n    data: JSON.stringify(data),\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\n// 修改个人信息（个人中心）\nconst getEditPersonalInfoPersonApi = (personalInfo, hireDateNew) => new Promise((resolve, reject) =>{\n    let data = {\n        id: personalInfo.id,\n        name: personalInfo.name,\n        username: personalInfo.username,\n        workNum: personalInfo.jobNumber,\n        department: personalInfo.department,\n        hireDate: hireDateNew,\n        phoneNumber: personalInfo.phone,\n        email: personalInfo.email,\n    };\n    axios({\n        method:'post',\n        url:'/api/update/selfInfo',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n    data: JSON.stringify(data),\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\nexport{\n    getPersonalInfoApi,\n    getUpdatePasswordApi,\n    getEditPersonalInfoApi,\n    getEditPersonalInfoPersonApi\n}","import axios from \"axios\";\n\n//获取用户表\nconst getUserInfoListApi = (pageNum, pageSize, department, role, username) => new Promise((resolve, reject) =>{\n    let data = {\n        pageNum: pageNum,\n        pageSize: pageSize,\n        department: department,\n        role: role,\n        username: username\n    };\n    axios({\n        method:'post',\n        url:'/api/basicInfos',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n        data: JSON.stringify(data),\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\n//获取部门列表\nconst getDepartmentListApi = () => new Promise((resolve, reject) =>{\n    axios({\n        method:'post',\n        url:'/api/departments',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\n// 删除用户（单个）\nconst getDeleteUserApi = (id) => new Promise((resolve, reject) =>{\n    axios({\n        method:'delete',\n        url:'/api/delete/user',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n        params: {\n            id: id\n        }\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\n// 上传用户信息文件\nconst getUserInfoExcelApi = (file) => new Promise((resolve, reject) => {\n    // 创建 FormData 对象\n    let formData = new FormData();\n    \n    // 将文件添加到 FormData 对象\n    formData.append('file', file);\n\n    // 发起 POST 请求\n    axios({\n        method: 'post',\n        url: '/api/upload',\n        headers: {\n            'Content-Type': 'multipart/form-data',\n        },\n        data: formData,\n    })\n    .then((response) => {\n        // 请求成功的处理\n        resolve(response);\n    })\n    .catch((error) => {\n        // 请求失败的处理\n        reject(error.response);\n    });\n});\n\n// 删除用户（批量）\nconst getDeleteUserManyApi = (ids) => new Promise((resolve, reject) =>{\n    let data = {\n        ids: ids  // 示例数据：[155, 156, 157, 158]\n    }\n    axios({\n        method:'delete',\n        url:'/api/delete/users',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n        data: JSON.stringify(data),\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\n// 新增用户\nconst getAddUserApi = (personalInfo, hireDateNew) => new Promise((resolve, reject) =>{\n    let data = {\n        id: personalInfo.id,\n        name: personalInfo.name,\n        username: personalInfo.username,\n        workNum: personalInfo.workNum,\n        department: personalInfo.department,\n        supervisor1: personalInfo.supervisor1,\n        supervisor2: personalInfo.supervisor2,\n        supervisor3: personalInfo.supervisor3,\n        hr: personalInfo.hr,\n        superAdmin: personalInfo.superAdmin,\n        firstAdmin: personalInfo.firstAdmin,\n        secondAdmin: personalInfo.secondAdmin,\n        hireDate: hireDateNew,\n        residence: personalInfo.residence,\n        phoneNumber: personalInfo.phoneNumber,\n        email: personalInfo.email,\n        businessType: personalInfo.businessType,\n        lxyz: personalInfo.lxyz,\n        role: personalInfo.role,\n        password: '00000000'\n    };\n    axios({\n        method:'post',\n        url:'/api/update/newUser',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n    data: JSON.stringify(data),\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\n\nexport{\n    getUserInfoListApi,\n    getDepartmentListApi,\n    getDeleteUserApi,\n    getUserInfoExcelApi,\n    getDeleteUserManyApi,\n    getAddUserApi\n}","<!-- 修改个人信息通用组件 -->\n<template>\n    <div class=\"container\">\n        <div class=\"password-edit\">\n            <div class=\"password-header\">\n                <span class=\"title\">修改密码</span>\n                <a-button type=\"primary\" ghost class=\"right-align\" @click=\"handleResetPassword\">修改</a-button>\n            </div>\n            <div class=\"password-form\">\n                <a-form>\n                    <a-row :gutter=\"72\">\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"旧密码\">\n                                <a-input :disabled=\"passwordIsEdit\" placeholder=\"请输入旧密码\"\n                                    v-model:value=\"formState.oldPassword\"></a-input>\n                            </a-form-item>\n                        </a-col>\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"新密码\">\n                                <a-input :disabled=\"passwordIsEdit\" placeholder=\"请输入新密码\"\n                                    v-model:value=\"formState.newPassword1\"></a-input>\n                            </a-form-item>\n                        </a-col>\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"确认密码\">\n                                <a-input :disabled=\"passwordIsEdit\" placeholder=\"请确认新密码\"\n                                    v-model:value=\"formState.newPassword2\"></a-input>\n                            </a-form-item>\n                        </a-col>\n                    </a-row>\n                    <a-form-item>\n                        <a-button v-if=\"!passwordIsEdit\" type=\"primary\" class=\"center-button\"\n                            @click=\"handleSubmitPassword\">提交</a-button>\n                    </a-form-item>\n                </a-form>\n            </div>\n        </div>\n        <div class=\"personal-info-edit\">\n            <div class=\"info-header\">\n                <span class=\"title\">维护个人信息</span>\n                <a-button type=\"primary\" ghost class=\"right-align\" @click=\"handleResetInfo\">修改</a-button>\n            </div>\n            <div class=\"personal-info-form\">\n                <a-form>\n                    <a-row :gutter=\"72\">\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"姓名\">\n                                <a-input placeholder=\"请输入姓名\"\n                                    v-model:value=\"userinfo.name\" disabled></a-input>\n                            </a-form-item>\n                        </a-col>\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"手机号\">\n                                <a-input :disabled=\"infoIsEdit\" placeholder=\"请输入手机号\"\n                                    v-model:value=\"userinfo.phone\"></a-input>\n                            </a-form-item>\n                        </a-col>\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"邮箱\">\n                                <a-input :disabled=\"infoIsEdit\" placeholder=\"请输入邮箱\"\n                                    v-model:value=\"userinfo.email\"></a-input>\n                            </a-form-item>\n                        </a-col>\n                    </a-row>\n\n                    <a-row :gutter=\"72\">\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"工号\">\n                                <a-input placeholder=\"请输入工号\"\n                                    v-model:value=\"userinfo.jobNumber\" disabled></a-input>\n                            </a-form-item>\n                        </a-col>\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"部门\">\n                                    <a-select placeholder=\"请输入部门\" v-model:value=\"userinfo.department\" disabled>\n                                        <a-select-option v-for=\"item in departmentList\" :key=\"item\" :value=\"item\">{{ item\n                                }}</a-select-option>\n                                    </a-select>\n                            </a-form-item>\n                        </a-col>\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"入职时间\">\n                                <a-date-picker style=\"width: 100%;\" placeholder=\"请选择入职时间\"\n                                    v-model:value=\"userinfo.entry_time\" disabled/>\n                            </a-form-item>\n                        </a-col>\n                    </a-row>\n\n                    <a-row :gutter=\"72\">\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"主管1\">\n                                <a-input placeholder=\"\" v-model:value=\"userinfo.manager1\" disabled></a-input>\n                            </a-form-item>\n                        </a-col>\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"主管2\">\n                                <a-input placeholder=\"\" v-model:value=\"userinfo.manager2\" disabled></a-input>\n                            </a-form-item>\n                        </a-col>\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"主管3\">\n                                <a-input placeholder=\"\" v-model:value=\"userinfo.manager3\" disabled></a-input>\n                            </a-form-item>\n                        </a-col>\n                    </a-row>\n\n                    <a-row :gutter=\"72\">\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"HRBP\">\n                                <a-input placeholder=\"\" v-model:value=\"userinfo.hrbp\" disabled></a-input>\n                            </a-form-item>\n                        </a-col>\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"系统角色\">\n                                <a-input placeholder=\"请选择系统角色\" v-model:value=\"userinfo.role\" disabled></a-input>\n                            </a-form-item>\n                        </a-col>\n                    </a-row>\n                    <a-form-item>\n                        <a-button v-if=\"!infoIsEdit\" type=\"primary\" class=\"center-button\"\n                            @click=\"handleSubmitInfo\">提交</a-button>\n                    </a-form-item>\n                </a-form>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script setup>\nimport { message } from \"ant-design-vue\";\nimport { onMounted, ref } from \"vue\"\nimport dayjs from 'dayjs';\nimport { getPersonalInfoApi, getUpdatePasswordApi, getEditPersonalInfoPersonApi } from '@/api/personalInfo'\nimport { getDepartmentListApi } from \"@/api/userManage\";\nimport { useRouter } from 'vue-router';\nimport { logoutApi } from '@/api/login'\n\nonMounted(() => {\n    getPersonalInfo(),\n    getDepartmentList()\n})\n\nconst router = useRouter();\nconst formState = ref({\n    oldPassword: \"\",\n    newPassword1: \"\",\n    newPassword2: \"\"\n})\nconst userinfo = ref({\n    name: \"\",\n    jobNumber: \"\",\n    department: \"\",\n    phone: \"\",\n    email: \"\",\n    entry_time: dayjs(\"2023-01-01\"),  // 注意：这里要使用dayjs格式化后才可正常回显\n    supervisor1:\"\",\n    supervisor2:\"\",\n    supervisor3:\"\",\n    hr:\"\",\n    manager1: \"\",\n    manager2: \"\",\n    manager3: \"\",\n    hrbp: \"\",\n    role: \"\"\n})\nconst passwordIsEdit = ref(true)\nconst handleResetPassword = () => {\n    passwordIsEdit.value = !passwordIsEdit.value\n}\n\n// 获取部门列表\nconst departmentList = ref(['部门a', '部门b'])\nconst getDepartmentList = () => {\n    getDepartmentListApi().then(res => {\n        if (res.data.code === 200) {\n            departmentList.value = []\n            for (let i = 0; i < res.data.data.length; i++) {\n                departmentList.value.push(res.data.data[i])\n            }\n        } else {\n            message.error('获取失败！'+ res.data.msg)\n        }\n    }).catch(err => {\n        message.error('请求失败！'+ err)\n    })\n}\n\n// 调用api-获取个人信息\nconst getPersonalInfo = () => {\n    getPersonalInfoApi().then(res => {\n        if (res.data.code === 200) {\n            // 1、将获取到的个人信息赋值给userinfo\n            userinfo.value.id = res.data.data.id\n            userinfo.value.name = res.data.data.name\n            userinfo.value.username = res.data.data.username\n            userinfo.value.jobNumber = res.data.data.workNum\n            userinfo.value.department = res.data.data.department\n            userinfo.value.phone = res.data.data.phoneNumber\n            userinfo.value.email = res.data.data.email\n            userinfo.value.entry_time = dayjs(res.data.data.hireDate),\n            userinfo.value.supervisor1 = res.data.data.supervisor1\n            userinfo.value.supervisor2 = res.data.data.supervisor2\n            userinfo.value.supervisor3 = res.data.data.supervisor3\n            userinfo.value.hr = res.data.data.hr\n            userinfo.value.manager1 = res.data.data.supervisorName1\n            userinfo.value.manager2 = res.data.data.supervisorName2\n            userinfo.value.manager3 = res.data.data.supervisorName3\n            userinfo.value.hrbp = res.data.data.hrName\n            userinfo.value.role = res.data.data.role\n\n            // 2、映射 role 到对应的角色名称\n            const roleMap = {\n                0: '普通用户',\n                1: '一级管理员',\n                2: '二级管理员',\n                3: '超级管理员'\n            };\n            userinfo.value.role = roleMap[res.data.data.role] || '未知角色'; // 防止未知角色值\n        } else {\n            message.error(\"获取个人信息失败！\" + res.data.msg);\n        }\n    }).catch(err => {\n        message.error(\"请求失败！\" + err);\n    })\n}\n// 调用api-修改密码\nconst handleSubmitPassword = () => {\n    // 1、验证两次密码不为空，且输入是否一致\n    if (formState.value.oldPassword === \"\" || formState.value.newPassword1 === \"\" || formState.value.newPassword2 === \"\") {\n        message.warning(\"请输入密码！\");\n        return\n    } else if (formState.value.newPassword1 !== formState.value.newPassword2) {\n        message.error(\"两次新密码输入不一致！\");\n        return\n    } else {\n        // 2、调用api-修改密码（传入接口：旧密码、新密码）\n        getUpdatePasswordApi(formState.value.oldPassword, formState.value.newPassword1).then(res => {\n            if (res.data.code === 200) {\n                message.success(\"修改密码成功！请重新登录~\")\n                // 3、将输入框变为不可编辑\n                passwordIsEdit.value = true\n                // 4、清空输入框\n                formState.value.oldPassword = \"\"\n                formState.value.newPassword1 = \"\"\n                formState.value.newPassword2 = \"\"\n                // 5、返回登录页面\n                logout()\n            } else {\n                message.error(\"修改失败！\" + res.data.msg);\n            }\n        }).catch(err => {\n            message.error(\"请求失败！\" + err);\n        })\n    }\n}\nconst infoIsEdit = ref(true)\nconst handleResetInfo = () => {\n    infoIsEdit.value = !infoIsEdit.value\n}\n// 调用api-修改个人信息\nconst handleSubmitInfo = () => {\n    // 1、获取输入框中的个人信息\n    // 若userinfo中的字段存在空值，则提示用户输入完整信息\n    if (userinfo.value.name === \"\" || userinfo.value.email === \"\" || userinfo.value.id === \"\" || userinfo.value.entry_time === \"\" || userinfo.value.department === \"\" || userinfo.value.manager === \"\" || userinfo.value.phone === \"\" || userinfo.value.role === \"\") {\n        message.warning(\"请输入完整信息！\");\n    } else {\n        // 2、调用api-修改个人信息\n        const personalInfo = userinfo.value\n        // 处理入职时间格式\n        const hireDate = personalInfo.entry_time.$d\n        const year = hireDate.getFullYear();\n        const month = String(hireDate.getMonth() + 1).padStart(2, '0'); // 月份从0开始，需要加1\n        const day = String(hireDate.getDate()).padStart(2, '0'); // 确保天数是两位数\n        const hireDateNew = `${year}-${month}-${day}`\n        // 调用api-修改信息\n        getEditPersonalInfoPersonApi(personalInfo, hireDateNew).then(res => {\n            if (res.data.code === 200) {\n                message.success('修改成功！^_^')\n                getPersonalInfo()\n                infoIsEdit.value = true\n            } else {\n                message.error('修改失败！'+ res.data.msg)\n            }\n        }).catch(err => {\n            console.log(err)\n        })        \n    }\n\n}\n\n// 退出登录\nconst logout = () => {\n    logoutApi().then(res => {\n        if(res.data.code === 200){\n            router.push({ path: '/' })\n            message.success('您已退出登录！');\n        }\n    }).catch(err => {\n        if(err.data.code === 403){\n            router.push({ path: '/' })\n            message.error('登录信息已失效，请重新登录！');\n        }else {\n            console.log('退出登录失败！', err)\n        }\n    })\n}\n</script>\n\n<style lang=\"less\" scoped>\n.container {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n}\n\n.password-edit {\n    flex: 1;\n    padding: 0px 15px 15px 15px;\n}\n\n.personal-info-edit {\n    flex: 4;\n    padding: 5px 15px 15px 15px;\n}\n\n.password-header,\n.info-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 10px;\n}\n\n.password-form,\n.personal-info-form {\n    background-color: #f0f0f0;\n    padding: 50px 5vw 3px 5vw;\n    border-radius: 8px;\n}\n\n.center-button {\n    display: block;\n    margin: 0 auto;\n}\n\n.right-align {\n    margin-left: auto;\n}\n\n.title {\n    font-weight: bold;\n    font-size: 16px;\n    color: #4091F7;\n}\n\na-form-item {\n    width: 100%;\n}\n</style>\n","import script from \"./PersonalInfoEdit.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PersonalInfoEdit.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PersonalInfoEdit.vue?vue&type=style&index=0&id=081089a4&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_@vue+compiler-sfc@3.5.13_vue@3.5.13_webpack@5.95.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-081089a4\"]])\n\nexport default __exports__","import script from \"./PersonalInfo.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PersonalInfo.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["getPersonalInfoApi","Promise","resolve","reject","axios","method","url","headers","then","response","catch","error","getUpdatePasswordApi","oldPassword","newPassword","data","JSON","stringify","getEditPersonalInfoApi","personalInfo","hireDateNew","id","name","username","workNum","department","supervisor1","supervisor2","supervisor3","hr","superAdmin","firstAdmin","secondAdmin","hireDate","residence","phoneNumber","email","businessType","lxyz","role","password","getEditPersonalInfoPersonApi","jobNumber","phone","getUserInfoListApi","pageNum","pageSize","getDepartmentListApi","getDeleteUserApi","params","getUserInfoExcelApi","file","formData","FormData","append","getDeleteUserManyApi","ids","getAddUserApi","onMounted","getPersonalInfo","getDepartmentList","router","useRouter","formState","ref","newPassword1","newPassword2","userinfo","entry_time","dayjs","manager1","manager2","manager3","hrbp","passwordIsEdit","handleResetPassword","value","departmentList","res","code","i","length","push","message","msg","err","supervisorName1","supervisorName2","supervisorName3","hrName","roleMap","handleSubmitPassword","success","logout","warning","infoIsEdit","handleResetInfo","handleSubmitInfo","manager","$d","year","getFullYear","month","String","getMonth","padStart","day","getDate","console","log","logoutApi","path","__exports__"],"sourceRoot":""}