{"version":3,"file":"js/133.9c9c19fb.js","mappings":"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","sources":["webpack://scoring_system_front/./src/api/personalInfo.js","webpack://scoring_system_front/./src/api/userManage.js","webpack://scoring_system_front/./src/components/PersonalInfoEdit.vue","webpack://scoring_system_front/./src/components/PersonalInfoEdit.vue?31f4","webpack://scoring_system_front/./src/page/ordinary/PersonalInfo.vue"],"sourcesContent":["import axios from \"axios\";\n\n// 查看个人信息\nconst getPersonalInfoApi = () => new Promise((resolve, reject) =>{\n    axios({\n        method:'get',\n        url:'/api/basicInfo',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\n// 修改密码\nconst getUpdatePasswordApi = (oldPassword, newPassword) => new Promise((resolve, reject) =>{\n    let data = {\n        oldPassword: oldPassword,\n        newPassword: newPassword,\n    };\n    axios({\n        method:'post',\n        url:'/api/update/password',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n    data: JSON.stringify(data),\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\n// 修改个人信息(管理员)\nconst getEditPersonalInfoApi = (personalInfo, hireDateNew) => new Promise((resolve, reject) =>{\n    let data = {\n        id: personalInfo.id,\n        name: personalInfo.name,\n        username: personalInfo.username,\n        workNum: personalInfo.workNum,\n        department: personalInfo.department,\n        supervisor1: personalInfo.supervisor1,\n        supervisor2: personalInfo.supervisor2,\n        supervisor3: personalInfo.supervisor3,\n        supervisor4: personalInfo.supervisor4,\n        // supervisorName1: personalInfo.supervisorName1,\n        // supervisorName2: personalInfo.supervisorName2,\n        // supervisorName3: personalInfo.supervisorName3,\n        // supervisorName4: personalInfo.supervisorName4,\n        hireDate: hireDateNew,\n        residence: personalInfo.residence,\n        phoneNumber: personalInfo.phoneNumber,\n        email: personalInfo.email,\n        businessType: personalInfo.businessType,\n        lxyz: personalInfo.lxyz,\n        role: personalInfo.role,\n        password: personalInfo.password\n    };\n    axios({\n        method:'post',\n        url:'/api/update/selfInfo',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n    data: JSON.stringify(data),\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\n// 修改个人信息（个人中心）\nconst getEditPersonalInfoPersonApi = (personalInfo, hireDateNew) => new Promise((resolve, reject) =>{\n    let data = {\n        id: personalInfo.id,\n        name: personalInfo.name,\n        username: personalInfo.username,\n        workNum: personalInfo.jobNumber,\n        department: personalInfo.department,\n        hireDate: hireDateNew,\n        phoneNumber: personalInfo.phone,\n        email: personalInfo.email,\n        supervisor1: personalInfo.supervisor1,\n        supervisor2: personalInfo.supervisor2,\n        supervisor3: personalInfo.supervisor3,\n        supervisor4: personalInfo.supervisor4,\n    };\n    axios({\n        method:'post',\n        url:'/api/update/selfInfo',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n    data: JSON.stringify(data),\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\nexport{\n    getPersonalInfoApi,\n    getUpdatePasswordApi,\n    getEditPersonalInfoApi,\n    getEditPersonalInfoPersonApi\n}","import axios from \"axios\";\n\n//获取用户表\nconst getUserInfoListApi = (pageNum, pageSize, department, role, username) => new Promise((resolve, reject) =>{\n    let data = {\n        pageNum: pageNum,\n        pageSize: pageSize,\n        department: department,\n        role: role,\n        username: username\n    };\n    axios({\n        method:'post',\n        url:'/api/basicInfos',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n        data: JSON.stringify(data),\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\n//获取部门列表\nconst getDepartmentListApi = () => new Promise((resolve, reject) =>{\n    axios({\n        method:'post',\n        url:'/api/departments',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\n// 删除用户（单个）\nconst getDeleteUserApi = (id) => new Promise((resolve, reject) =>{\n    axios({\n        method:'delete',\n        url:'/api/delete/user',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n        params: {\n            id: id\n        }\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\n// 上传用户信息文件\nconst getUserInfoExcelApi = (file) => new Promise((resolve, reject) => {\n    // 创建 FormData 对象\n    let formData = new FormData();\n    \n    // 将文件添加到 FormData 对象\n    formData.append('file', file);\n\n    // 发起 POST 请求\n    axios({\n        method: 'post',\n        url: '/api/upload',\n        headers: {\n            'Content-Type': 'multipart/form-data',\n        },\n        data: formData,\n    })\n    .then((response) => {\n        // 请求成功的处理\n        resolve(response);\n    })\n    .catch((error) => {\n        // 请求失败的处理\n        reject(error.response);\n    });\n});\n\n// 删除用户（批量）\nconst getDeleteUserManyApi = (ids) => new Promise((resolve, reject) =>{\n    let data = {\n        ids: ids  // 示例数据：[155, 156, 157, 158]\n    }\n    axios({\n        method:'delete',\n        url:'/api/delete/users',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n        data: JSON.stringify(data),\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\n\nexport{\n    getUserInfoListApi,\n    getDepartmentListApi,\n    getDeleteUserApi,\n    getUserInfoExcelApi,\n    getDeleteUserManyApi\n}","<!-- 修改个人信息通用组件 -->\n<template>\n    <div class=\"container\">\n        <div class=\"password-edit\">\n            <div class=\"password-header\">\n                <span class=\"title\">修改密码</span>\n                <a-button type=\"primary\" ghost class=\"right-align\" @click=\"handleResetPassword\">修改</a-button>\n            </div>\n            <div class=\"password-form\">\n                <a-form>\n                    <a-row :gutter=\"72\">\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"旧密码\">\n                                <a-input :disabled=\"passwordIsEdit\" placeholder=\"请输入旧密码\"\n                                    v-model:value=\"formState.oldPassword\"></a-input>\n                            </a-form-item>\n                        </a-col>\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"新密码\">\n                                <a-input :disabled=\"passwordIsEdit\" placeholder=\"请输入新密码\"\n                                    v-model:value=\"formState.newPassword1\"></a-input>\n                            </a-form-item>\n                        </a-col>\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"确认密码\">\n                                <a-input :disabled=\"passwordIsEdit\" placeholder=\"请确认新密码\"\n                                    v-model:value=\"formState.newPassword2\"></a-input>\n                            </a-form-item>\n                        </a-col>\n                    </a-row>\n                    <a-form-item>\n                        <a-button v-if=\"!passwordIsEdit\" type=\"primary\" class=\"center-button\"\n                            @click=\"handleSubmitPassword\">提交</a-button>\n                    </a-form-item>\n                </a-form>\n            </div>\n        </div>\n        <div class=\"personal-info-edit\">\n            <div class=\"info-header\">\n                <span class=\"title\">维护个人信息</span>\n                <a-button type=\"primary\" ghost class=\"right-align\" @click=\"handleResetInfo\">修改</a-button>\n            </div>\n            <div class=\"personal-info-form\">\n                <a-form>\n                    <a-row :gutter=\"72\">\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"姓名\">\n                                <a-input :disabled=\"infoIsEdit\" placeholder=\"请输入姓名\"\n                                    v-model:value=\"userinfo.name\"></a-input>\n                            </a-form-item>\n                        </a-col>\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"工号\">\n                                <a-input :disabled=\"infoIsEdit\" placeholder=\"请输入工号\"\n                                    v-model:value=\"userinfo.jobNumber\"></a-input>\n                            </a-form-item>\n                        </a-col>\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"部门\">\n                                    <a-select :disabled=\"infoIsEdit\" placeholder=\"请输入部门\" v-model:value=\"userinfo.department\">\n                                        <a-select-option v-for=\"item in departmentList\" :key=\"item\" :value=\"item\">{{ item\n                                }}</a-select-option>\n                                    </a-select>\n                            </a-form-item>\n                        </a-col>\n                    </a-row>\n\n                    <a-row :gutter=\"72\">\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"手机号\">\n                                <a-input :disabled=\"infoIsEdit\" placeholder=\"请输入手机号\"\n                                    v-model:value=\"userinfo.phone\"></a-input>\n                            </a-form-item>\n                        </a-col>\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"邮箱\">\n                                <a-input :disabled=\"infoIsEdit\" placeholder=\"请输入邮箱\"\n                                    v-model:value=\"userinfo.email\"></a-input>\n                            </a-form-item>\n                        </a-col>\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"入职时间\">\n                                <a-date-picker style=\"width: 100%;\" :disabled=\"infoIsEdit\" placeholder=\"请选择入职时间\"\n                                    v-model:value=\"userinfo.entry_time\" />\n                            </a-form-item>\n                        </a-col>\n                    </a-row>\n\n                    <a-row :gutter=\"72\">\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"主管1\">\n                                <a-input placeholder=\"\" v-model:value=\"userinfo.manager1\" disabled></a-input>\n                            </a-form-item>\n                        </a-col>\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"主管2\">\n                                <a-input placeholder=\"\" v-model:value=\"userinfo.manager2\" disabled></a-input>\n                            </a-form-item>\n                        </a-col>\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"主管3\">\n                                <a-input placeholder=\"\" v-model:value=\"userinfo.manager3\" disabled></a-input>\n                            </a-form-item>\n                        </a-col>\n                    </a-row>\n\n                    <a-row :gutter=\"72\">\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"主管4\">\n                                <a-input placeholder=\"\" v-model:value=\"userinfo.manager4\" disabled></a-input>\n                            </a-form-item>\n                        </a-col>\n                        <a-col :span=\"8\">\n                            <a-form-item label=\"系统角色\">\n                                <a-input placeholder=\"请选择系统角色\" v-model:value=\"userinfo.role\" disabled></a-input>\n                            </a-form-item>\n                        </a-col>\n                    </a-row>\n                    <a-form-item>\n                        <a-button v-if=\"!infoIsEdit\" type=\"primary\" class=\"center-button\"\n                            @click=\"handleSubmitInfo\">提交</a-button>\n                    </a-form-item>\n                </a-form>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script setup>\nimport { message } from \"ant-design-vue\";\nimport { onMounted, ref } from \"vue\"\nimport dayjs from 'dayjs';\nimport { getPersonalInfoApi, getUpdatePasswordApi, getEditPersonalInfoPersonApi } from '@/api/personalInfo'\nimport { getDepartmentListApi } from \"@/api/userManage\";\nimport { useRouter } from 'vue-router';\n\nonMounted(() => {\n    getPersonalInfo(),\n    getDepartmentList()\n})\n\nconst router = useRouter();\nconst formState = ref({\n    oldPassword: \"\",\n    newPassword1: \"\",\n    newPassword2: \"\"\n})\nconst userinfo = ref({\n    name: \"\",\n    jobNumber: \"\",\n    department: \"\",\n    phone: \"\",\n    email: \"\",\n    entry_time: dayjs(\"2023-01-01\"),  // 注意：这里要使用dayjs格式化后才可正常回显\n    supervisor1:\"\",\n    supervisor2:\"\",\n    supervisor3:\"\",\n    supervisor4:\"\",\n    manager1: \"\",\n    manager2: \"\",\n    manager3: \"\",\n    manager4: \"\",\n    role: \"\"\n})\nconst passwordIsEdit = ref(true)\nconst handleResetPassword = () => {\n    passwordIsEdit.value = !passwordIsEdit.value\n}\n\n// 获取部门列表\nconst departmentList = ref(['部门a', '部门b'])\nconst getDepartmentList = () => {\n    getDepartmentListApi().then(res => {\n        if (res.data.code === 200) {\n            departmentList.value = []\n            for (let i = 0; i < res.data.data.length; i++) {\n                departmentList.value.push(res.data.data[i])\n            }\n        } else {\n            message.error('获取失败！', res.data.msg)\n        }\n    }).catch(err => {\n        message.error('请求失败！', err)\n    })\n}\n\n// 调用api-获取个人信息\nconst getPersonalInfo = () => {\n    getPersonalInfoApi().then(res => {\n        if (res.data.code === 200) {\n            // 1、将获取到的个人信息赋值给userinfo\n            userinfo.value.id = res.data.data.id\n            userinfo.value.name = res.data.data.name\n            userinfo.value.username = res.data.data.username\n            userinfo.value.jobNumber = res.data.data.workNum\n            userinfo.value.department = res.data.data.department\n            userinfo.value.phone = res.data.data.phoneNumber\n            userinfo.value.email = res.data.data.email\n            userinfo.value.entry_time = dayjs(res.data.data.hireDate),\n            userinfo.value.supervisor1 = res.data.data.supervisor1\n            userinfo.value.supervisor2 = res.data.data.supervisor2\n            userinfo.value.supervisor3 = res.data.data.supervisor3\n            userinfo.value.supervisor4 = res.data.data.supervisor4\n            userinfo.value.manager1 = res.data.data.supervisorName1\n            userinfo.value.manager2 = res.data.data.supervisorName2\n            userinfo.value.manager3 = res.data.data.supervisorName3\n            userinfo.value.manager4 = res.data.data.supervisorName4\n            userinfo.value.role = res.data.data.role\n\n            // 2、映射 role 到对应的角色名称\n            const roleMap = {\n                0: '普通用户',\n                1: '一级管理员',\n                2: '二级管理员',\n                3: '超级管理员'\n            };\n            userinfo.value.role = roleMap[res.data.data.role] || '未知角色'; // 防止未知角色值\n        } else {\n            message.error(\"获取个人信息失败！\" + res.data.msg);\n        }\n    }).catch(err => {\n        message.error(\"请求失败！\" + err);\n    })\n}\n// 调用api-修改密码\nconst handleSubmitPassword = () => {\n    // 1、验证两次密码不为空，且输入是否一致\n    if (formState.value.oldPassword === \"\" || formState.value.newPassword1 === \"\" || formState.value.newPassword2 === \"\") {\n        message.warning(\"请输入密码！\");\n        return\n    } else if (formState.value.newPassword1 !== formState.value.newPassword2) {\n        message.error(\"两次新密码输入不一致！\");\n        return\n    } else {\n        // 2、调用api-修改密码（传入接口：旧密码、新密码）\n        getUpdatePasswordApi(formState.value.oldPassword, formState.value.newPassword1).then(res => {\n            if (res.data.code === 200) {\n                message.success(\"修改密码成功！请重新登录~\")\n                // 3、将输入框变为不可编辑\n                passwordIsEdit.value = true\n                // 4、清空输入框\n                formState.value.oldPassword = \"\"\n                formState.value.newPassword1 = \"\"\n                formState.value.newPassword2 = \"\"\n                // 5、返回登录页面\n                router.replace({ path: '/' })\n            } else {\n                message.error(\"修改失败！\" + res.data.msg);\n            }\n        }).catch(err => {\n            message.error(\"请求失败！\" + err);\n        })\n    }\n}\nconst infoIsEdit = ref(true)\nconst handleResetInfo = () => {\n    infoIsEdit.value = !infoIsEdit.value\n}\n// 调用api-修改个人信息\nconst handleSubmitInfo = () => {\n    // 1、获取输入框中的个人信息\n    // 若userinfo中的字段存在空值，则提示用户输入完整信息\n    if (userinfo.value.name === \"\" || userinfo.value.email === \"\" || userinfo.value.id === \"\" || userinfo.value.entry_time === \"\" || userinfo.value.department === \"\" || userinfo.value.manager === \"\" || userinfo.value.phone === \"\" || userinfo.value.role === \"\") {\n        message.warning(\"请输入完整信息！\");\n    } else {\n        // 2、调用api-修改个人信息\n        const personalInfo = userinfo.value\n        // 处理入职时间格式\n        const hireDate = personalInfo.entry_time.$d\n        const year = hireDate.getFullYear();\n        const month = String(hireDate.getMonth() + 1).padStart(2, '0'); // 月份从0开始，需要加1\n        const day = String(hireDate.getDate()).padStart(2, '0'); // 确保天数是两位数\n        const hireDateNew = `${year}-${month}-${day}`\n        // 调用api-修改信息\n        getEditPersonalInfoPersonApi(personalInfo, hireDateNew).then(res => {\n            if (res.data.code === 200) {\n                message.success('修改成功！^_^')\n                getPersonalInfo()\n                infoIsEdit.value = true\n            } else {\n                message.error('修改失败！', res.data.msg)\n            }\n        }).catch(err => {\n            console.log(err)\n        })        \n    }\n\n}\n</script>\n\n<style lang=\"less\" scoped>\n.container {\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n}\n\n.password-edit {\n    flex: 1;\n    padding: 0px 15px 15px 15px;\n}\n\n.personal-info-edit {\n    flex: 4;\n    padding: 5px 15px 15px 15px;\n}\n\n.password-header,\n.info-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 10px;\n}\n\n.password-form,\n.personal-info-form {\n    background-color: #f0f0f0;\n    padding: 50px 5vw 3px 5vw;\n    border-radius: 8px;\n}\n\n.center-button {\n    display: block;\n    margin: 0 auto;\n}\n\n.right-align {\n    margin-left: auto;\n}\n\n.title {\n    font-weight: bold;\n    font-size: 16px;\n    color: #4091F7;\n}\n\na-form-item {\n    width: 100%;\n}\n</style>\n","import script from \"./PersonalInfoEdit.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PersonalInfoEdit.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PersonalInfoEdit.vue?vue&type=style&index=0&id=b6adb9c8&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.10_webpack@5.95.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b6adb9c8\"]])\n\nexport default __exports__","import script from \"./PersonalInfo.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PersonalInfo.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["getPersonalInfoApi","Promise","resolve","reject","axios","method","url","headers","then","response","catch","error","getUpdatePasswordApi","oldPassword","newPassword","data","JSON","stringify","getEditPersonalInfoApi","personalInfo","hireDateNew","id","name","username","workNum","department","supervisor1","supervisor2","supervisor3","supervisor4","hireDate","residence","phoneNumber","email","businessType","lxyz","role","password","getEditPersonalInfoPersonApi","jobNumber","phone","getUserInfoListApi","pageNum","pageSize","getDepartmentListApi","getDeleteUserApi","params","getUserInfoExcelApi","file","formData","FormData","append","getDeleteUserManyApi","ids","onMounted","getPersonalInfo","getDepartmentList","router","useRouter","formState","ref","newPassword1","newPassword2","userinfo","entry_time","dayjs","manager1","manager2","manager3","manager4","passwordIsEdit","handleResetPassword","value","departmentList","res","code","i","length","push","message","msg","err","supervisorName1","supervisorName2","supervisorName3","supervisorName4","roleMap","handleSubmitPassword","success","replace","path","warning","infoIsEdit","handleResetInfo","handleSubmitInfo","manager","$d","year","getFullYear","month","String","getMonth","padStart","day","getDate","console","log","__exports__"],"sourceRoot":""}