"use strict";(self["webpackChunkscoring_system_front"]=self["webpackChunkscoring_system_front"]||[]).push([[126],{1126:function(e,a,t){t.r(a),t.d(a,{default:function(){return _}});t(9138);var s=t(5115),n=t(9650),o=t(9675),i=t(9884),l=t(6643),d=t(5857);const c=()=>new Promise(((e,a)=>{(0,d.A)({method:"get",url:"/api/find/history",headers:{"Content-Type":"application/json"}}).then((a=>{e(a)})).catch((e=>{a(e.response)}))})),r=e=>new Promise(((a,t)=>{(0,d.A)({method:"get",url:"/api/find/score",headers:{"Content-Type":"application/json"},params:{taskId:e}}).then((e=>{a(e)})).catch((e=>{t(e.response)}))}));var u=t(3771);const p={class:"content-log"},v={key:0,class:"timeline-text"},k={style:{"font-weight":"bold"}},m={style:{color:"grey"}},y={key:1,class:"timeline-text"},g={style:{color:"grey"}},f={style:{padding:"5px 5px 0px 5px"}},h={key:2};var b={__name:"ActionLog",setup(e){(0,s.sV)((()=>{I()}));const a=(0,o.KR)(!1),t=(0,o.KR)(!0),d=()=>{a.value=!0},b=e=>{a.value=!1},x=(0,o.KR)([]),I=()=>{c().then((e=>{if(200===e.data.code){x.value=[];for(let a=0;a<e.data.data.data.length;a++)x.value.push({assessorId:e.data.data.data[a].assessorId,assessorName:e.data.data.data[a].assessorName,assessorTime:e.data.data.data[a].assessorTime,isReject:e.data.data.data[a].isReject,taskId:e.data.data.data[a].taskId});0===x.value.length?t.value=!0:t.value=!1}else u.Ay.error("获取失败！"+e.data.msg)})).catch((e=>{u.Ay.error("请求失败，请稍后重试！")}))},_=(0,o.KR)("ceshi"),P=(0,o.KR)("2024-10-01"),C=[{name:"Dimension",dataIndex:"dimension",key:"dimension",fixed:"left"},{title:"成为榜样（5分）",dataIndex:"beExample",key:"beExample",align:"center"},{title:"成为习惯（4.5分）",dataIndex:"beHabit",key:"beHabit",align:"center"},{title:"经常正感知（4分）",key:"oftenPositive",dataIndex:"oftenPositive",align:"center"},{title:"偶尔正感知（3.5分）",dataIndex:"occasionalPositive",key:"occasionalPositive",align:"center"},{title:"无感知（3分）",dataIndex:"noPerception",key:"noPerception",align:"center"},{title:"偶尔负感知（2.5分）",key:"occasionalNegative",dataIndex:"occasionalNegative",align:"center"},{title:"经常负感知（2分）",key:"oftenNegative",dataIndex:"oftenNegative",align:"center"}],F=(0,o.KR)([]),N=e=>{!0===e.isReject?R("warning","记录被驳回，请注意！"):(_.value=e.assessorName,P.value=e.assessorTime,r(e.taskId).then((e=>{if(200===e.data.code){F.value.length=0;const a=[{key:"1",dimension:"思想上：开放进取（O）"},{key:"2",dimension:"作风上：把打胜仗作为信仰（W）"},{key:"3",dimension:"业务上：创实求新（I）"},{key:"4",dimension:"工作中：信任互助（H）"},{key:"5",dimension:"员工间：尊重平等（R）"},{key:"6",dimension:"行为上：业精于勤（D）"},{key:"7",dimension:"执行力：使命必达（M）"},{key:"8",dimension:"团队上：五湖四海（F）"},{key:"9",dimension:"成长上：坚持自省（I）"}],t={5:"beExample",4.5:"beHabit",4:"oftenPositive",3.5:"occasionalPositive",3:"noPerception",2.5:"occasionalNegative",2:"oftenNegative"};e.data.data.scores.forEach(((e,s)=>{const n={beExample:"0",beHabit:"0",oftenPositive:"0",occasionalPositive:"0",noPerception:"0",occasionalNegative:"0",oftenNegative:"0"},o=t[e];o&&(n[o]="1"),F.value.push({...a[s],...n})}))}else u.Ay.error("获取失败！"+e.data.msg)})).catch((e=>{console.error("请求出错:",e),u.Ay.error("请求失败，请稍后重试！")})),d())},R=e=>{l.A[e]({message:"提示",description:"请到 <我的待办> 页面重新评议，若已重新评议，请忽略本提示 (˶˚ ᗨ ˚˶) ~"})};return(e,l)=>{const d=(0,s.g2)("a-empty"),c=(0,s.g2)("a-timeline-item"),r=(0,s.g2)("a-timeline"),u=(0,s.g2)("a-table"),I=(0,s.g2)("a-modal");return(0,s.uX)(),(0,s.CE)(s.FK,null,[l[6]||(l[6]=(0,s.Lk)("div",{class:"content-title"},[(0,s.Lk)("span",null,"我的操作日志")],-1)),(0,s.Lk)("div",p,[t.value?((0,s.uX)(),(0,s.Wv)(d,{key:0,class:"no-data"})):(0,s.Q3)("",!0),(0,s.bF)(r,null,{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(x.value,(e=>((0,s.uX)(),(0,s.Wv)(c,{key:e.assessorName,color:e.isReject?"red":"#1677FF",class:"timeline-item",onClick:a=>N(e)},{default:(0,s.k6)((()=>[e.isReject?((0,s.uX)(),(0,s.CE)("span",y,[l[3]||(l[3]=(0,s.eW)(" 您有周边评议被打回，请重新评议 ")),(0,s.Lk)("span",g,"/ "+(0,n.v_)(e.assessorTime),1)])):((0,s.uX)(),(0,s.CE)("span",v,[l[1]||(l[1]=(0,s.eW)(" 您完成了对 ")),(0,s.Lk)("span",k,(0,n.v_)(e.assessorName),1),l[2]||(l[2]=(0,s.eW)(" 的周边评议 ")),(0,s.Lk)("span",m,"/ "+(0,n.v_)(e.assessorTime),1)]))])),_:2},1032,["color","onClick"])))),128))])),_:1}),(0,s.bF)(I,{open:a.value,"onUpdate:open":l[0]||(l[0]=e=>a.value=e),title:"查看打分记录",onOk:b,style:{width:"90vw"},class:"score-table"},{default:(0,s.k6)((()=>[(0,s.Lk)("span",f,[l[4]||(l[4]=(0,s.Lk)("span",{style:{color:"#3894FF"}},"您当前的评估对象为：",-1)),(0,s.Lk)("span",null,(0,n.v_)(_.value),1),l[5]||(l[5]=(0,s.Lk)("span",{style:{color:"#3894FF"}}," / 评估时间：",-1)),(0,s.Lk)("span",null,(0,n.v_)(P.value),1)]),(0,s.bF)(u,{columns:C,"data-source":F.value,pagination:!1,bordered:""},{bodyCell:(0,s.k6)((({column:e,text:a})=>["dimension"===e.dataIndex?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.eW)((0,n.v_)(a),1)],64)):"1"===a?((0,s.uX)(),(0,s.Wv)((0,o.R1)(i.A),{key:1,style:{"font-size":"20px"}})):((0,s.uX)(),(0,s.CE)("span",h))])),_:1},8,["data-source"])])),_:1},8,["open"])])],64)}}},x=t(2965);const I=(0,x.A)(b,[["__scopeId","data-v-096010a2"]]);var _=I}}]);
//# sourceMappingURL=126.9696e12f.js.map