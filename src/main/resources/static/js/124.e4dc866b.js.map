{"version":3,"file":"js/124.e4dc866b.js","mappings":"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","sources":["webpack://scoring_system_front/./src/api/todoList.js","webpack://scoring_system_front/./src/api/scoringMatrix.js","webpack://scoring_system_front/./src/page/admin/ScoringMatrix.vue","webpack://scoring_system_front/./src/page/admin/ScoringMatrix.vue?b17b"],"sourcesContent":["import axios from \"axios\";\n\n//获取该时间段内的执行情况数据\nconst getTodoListApi = (pageNum, pageSize) => new Promise((resolve, reject) =>{\n    axios({\n        method:'get',\n        url:'/api/todolist',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n        params: {\n            pageNum: pageNum,\n            pageSize: pageSize\n        },\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\n//获取人员列表\nconst getUserListApi = () => new Promise((resolve, reject) =>{\n    axios({\n        method:'get',\n        url:'/api/findAll',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        }\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\n//提交选择的被评估人\nconst getEvaluatedListApi = (userIds) => new Promise((resolve, reject) =>{\n    let data = {\n        userIds: userIds\n    };\n    axios({\n        method:'post',\n        url:'/api/add/evaluated',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n      data: JSON.stringify(data),\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\nexport{\n    getTodoListApi,\n    getUserListApi,\n    getEvaluatedListApi\n}","import axios from \"axios\";\n\n//获取评分关系矩阵\nconst getScoreMatrixApi = (pageNum, pageSize, name) => new Promise((resolve, reject) =>{\n    let data = {\n        name:name,\n        pageNum: pageNum,\n        pageSize: pageSize\n    };\n    axios({\n        method:'post',\n        url:'/api/find/relationships',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n        data: JSON.stringify(data),\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\n// 添加固定评估人\nconst getAddEvaluatorApi = (evaluatorId, userId) => new Promise((resolve, reject) =>{\n    axios({\n        method:'post',\n        url:'/api/add/relationship',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n        params: {\n            evaluatorId: evaluatorId,\n            userId: userId\n        },\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\n// 删除固定评估人\nconst getDelEvaluatorApi = (evaluatorId, userId) => new Promise((resolve, reject) =>{\n    axios({\n        method:'delete',\n        url:'/api/update/relationship',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        },\n        params: {\n            evaluatorId: evaluatorId,\n            userId: userId\n        },\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\n// 上传矩阵关系文件\nconst getMatrixExcelApi = (file) => new Promise((resolve, reject) => {\n    // 创建 FormData 对象\n    let formData = new FormData();\n    \n    // 将文件添加到 FormData 对象\n    formData.append('file', file);\n\n    // 发起 POST 请求\n    axios({\n        method: 'post',\n        url: '/api/import/relationship',\n        headers: {\n            'Content-Type': 'multipart/form-data',\n        },\n        data: formData,\n    })\n    .then((response) => {\n        // 请求成功的处理\n        resolve(response);\n    })\n    .catch((error) => {\n        // 请求失败的处理\n        reject(error.response);\n    });\n});\n\n// 发布矩阵关系\nconst getPushRelationApi = () => new Promise((resolve, reject) =>{\n    axios({\n        method:'get',\n        url:'/api/relation/step',\n        headers:{\n            \"Content-Type\": \"application/json\",\n        }\n    }).then((response)=>{\n        resolve(response)\n    }).catch((error)=>{\n        reject(error.response)\n    })\n})\n\nexport{\n    getScoreMatrixApi,\n    getAddEvaluatorApi,\n    getDelEvaluatorApi,\n    getMatrixExcelApi,\n    getPushRelationApi\n}","<!-- 管理员/超级管理员--维护评分矩阵 -->\n<script setup>\nimport { reactive, ref, onMounted, onUnmounted } from \"vue\";\nimport { message } from 'ant-design-vue'\nimport dayjs from \"dayjs\";\nimport { getScoreMatrixApi, getAddEvaluatorApi, getDelEvaluatorApi, getMatrixExcelApi, getPushRelationApi } from \"@/api/scoringMatrix\";\nimport { getUserListApi } from '@/api/todoList'\nimport { getStepTimeApi } from \"@/api/scoreTimeSet\"\n\n// 获取当前评估进度\nconst published = ref(false)\nconst currentSession = ref()\n// 获得当前评估进度\nconst getStepTime = () => {\n    getStepTimeApi()\n        .then(res => {\n            if (res.data.code === 200) {\n                for (let i = 0; i <= res.data.data.evaluateStep.length - 1; i++) {\n                    if (res.data.data.evaluateStep[i].enable === 1) {\n                        currentSession.value = i + 1 + '';\n                        if (currentSession.value === '1') {\n                            published.value = false\n                        } else {\n                            published.value = true\n                        }\n                    }\n                }\n            } else {\n                message.error('获取失败！' + res.data.msg)\n            }\n        })\n        .catch(err => {\n            console.log('获取失败！', err);\n        });\n};\n\n// 搜索框表单数据\nconst serchInfo = reactive({\n    name: null,\n});\n\n// 当前选择的被评估人id\nconst evaluatorId = ref(null)\n// 定义搜索功能提交函数\nconst searchSubmit = () => {\n    pagination.current = 1 // 每次搜索将当前页数变为1\n    // 调用接口进行搜索\n    getScoreMatrix()\n};\n\n// 分页配置\nconst pagination = reactive({  // 表格页码相关设置\n    pageSize: 12, //每页最多条目数\n    current: 1, //当前页码\n    total: 0, //总条目数\n    showTotal: (total, range) => `总共 ${total} 条数据`, // 在这里定义显示总数据量的格式\n})\n\n// 表格的列配置，更新为所需的字段\nconst columns = ref([\n    {\n        title: '序号',\n        dataIndex: 'index',\n        key: 'index',\n        fixed: 'left',  // 固定在左侧\n        align: 'center',\n        width: 65,\n    },\n    {\n        title: '被评估人',\n        dataIndex: 'name',\n        key: 'name',\n        fixed: 'left',  // 固定在左侧\n        align: 'center',\n        width: 100,\n    },\n    {\n        title: '主管1',\n        dataIndex: 'supervisorName1',\n        key: 'supervisorName1',\n        align: 'center',\n        width: 100,\n    },\n    {\n        title: '主管2',\n        dataIndex: 'supervisorName2',\n        key: 'supervisorName2',\n        align: 'center',\n        width: 100,\n    },\n    {\n        title: '主管3',\n        dataIndex: 'supervisorName3',\n        key: 'supervisorName3',\n        align: 'center',\n        width: 100,\n    },\n    {\n        title: '主管4',\n        dataIndex: 'supervisorName4',\n        key: 'supervisorName4',\n        align: 'center',\n        width: 100,\n    },\n    {\n        title: '固定评估人',\n        dataIndex: 'relationshipFixed',\n        key: 'relationshipFixed',\n        align: 'center',\n        // width: 80,\n    },\n    {\n        title: '自主评估人',\n        dataIndex: 'relationshipSelf',\n        key: 'relationshipSelf',\n        align: 'center',\n        // width: 80,\n    },\n    {\n        title: '操作',\n        key: 'action',\n        fixed: 'right',  // 固定在右侧\n        align: 'center',\n        width: 160,\n    },\n])\n\n// 表格数据\nconst tableData = ref([])\nconst scrollHeight = ref('60vh');  // 定义滚动区域高度\n// 动态更新高度\nconst updateScrollHeight = () => {\n    const screenHeight = window.innerHeight;\n    const containerHeight = screenHeight - 50 - 10; // 假设父容器需要减去固定的偏移量\n    if (screenHeight < 800) {\n        scrollHeight.value = `${containerHeight * 0.63}px`; // 小屏幕高度为 50%\n    } else {\n        scrollHeight.value = `${containerHeight * 0.7}px`; // 大屏幕高度为 80%\n    }\n};\n// 获取用户表\nconst getScoreMatrix = () => {\n    getScoreMatrixApi(pagination.current, pagination.pageSize, serchInfo.name).then(res => {\n        if (res.data.code === 200) {\n            // 设置分页总数\n            pagination.total = res.data.data.total;\n\n            // 清空 data.value，避免多次追加导致重复数据\n            tableData.value = [];\n\n            // 获取数据\n            for (let i = 0; i < res.data.data.data.length; i++) {\n                const Fixed = res.data.data.data[i].relationshipFixedList || []\n                const Self = res.data.data.data[i].relationshipSelfList || []\n\n                // 处理固定评估人列表数据\n                const FixedList = Fixed.map(item => item.name).join(\"、\")\n\n                // 处理自主评估人列表数据\n                const SelfList = Self.map(item => item.name).join(\"、\")\n\n                tableData.value.push({\n                    index: pagination.current * pagination.pageSize - pagination.pageSize + i + 1,\n                    userId: res.data.data.data[i].userId,\n                    name: res.data.data.data[i].name,\n                    supervisorName1: res.data.data.data[i].supervisorName1,\n                    supervisorName2: res.data.data.data[i].supervisorName2,\n                    supervisorName3: res.data.data.data[i].supervisorName3,\n                    supervisorName4: res.data.data.data[i].supervisorName4,\n                    relationshipFixedList: res.data.data.data[i].relationshipFixedList,\n                    relationshipSelfList: res.data.data.data[i].relationshipSelfList,\n                    relationshipFixed: FixedList,\n                    relationshipSelf: SelfList\n                })\n            }\n        }\n    }).catch(err => {\n        message.error('请求失败！', err);\n    })\n}\n\n// 处理翻页\nconst handleTableChange = (e) => {\n    pagination.current = Number(e.current); //更新当前页码\n    pagination.pageSize = e.pageSize; //更新每页显示条目数\n    // sessionStorage.setItem('currentIndex', pagination.current)\n    getScoreMatrix()  // 重新获取列表数据\n}\n\nconst openDetail = ref(false);  //查看详情弹窗默认不展示\nconst columnsDetail = ref([\n    {\n        title: '序号',\n        dataIndex: 'index',\n        key: 'index',\n        width: '15%',\n        align: 'center'\n    },\n    {\n        title: '用户名',\n        dataIndex: 'username',\n        key: 'username',\n        // width: '15%',\n        align: 'center'\n    },\n    {\n        title: '工号',\n        dataIndex: 'jobuNumber',\n        key: 'jobuNumber',\n        // width: '30%',\n        align: 'center'\n    },\n    {\n        title: '部门',\n        dataIndex: 'department',\n        key: 'department',\n        // width: '30%',\n        align: 'center'\n    },\n    {\n        title: '操作',\n        key: 'action',\n        width: '15%',\n        align: 'center'\n    }\n])\nconst dataDetail = ref([]);\nconst showDetail = (record) => {\n    // 更新当前选择的被评估人id\n    evaluatorId.value = record.userId\n    // 清空选择列表\n    dataDetail.value = []\n    for (let i = 0; i < record.relationshipFixedList.length; i++) {\n        dataDetail.value.push({\n            index: i + 1,\n            key: record.relationshipFixedList[i].id,\n            username: record.relationshipFixedList[i].name,\n            jobuNumber: record.relationshipFixedList[i].workNum,\n            department: record.relationshipFixedList[i].department\n        })\n    }\n    openDetail.value = true;\n};\n// 调用api-删除固定评估人\nconst delOne = (record) => {\n    // 找到与record.key相等的项\n    const index = dataDetail.value.findIndex(item => item.key === record.key);\n    // 调用api\n    getDelEvaluatorApi(record.key, evaluatorId.value).then(res => {\n        if (res.data.code === 200) {\n            message.success('删除成功！')\n            if (index !== -1) {\n                dataDetail.value.splice(index, 1);\n            }\n            getScoreMatrix()\n        } else {\n            message.error('删除失败！', res.data.msg)\n        }\n    }).catch(err => {\n        message.error('请求失败！', err);\n    })\n}\nconst openEvaluator = ref(false); //添加评测人弹窗默认不展示\nconst showEvaluator = () => {\n    getUserList()\n    openEvaluator.value = true;\n};\nconst evaluator = ref();\nconst options = ref([])\n// 获取人员列表\nconst getUserList = () => {\n    getUserListApi().then(res => {\n        if (res.data.code === 200) {\n            options.value = [{\n                value: '空值',\n                key: 0\n            }]\n            for (let i = 0; i <= res.data.data.length - 1; i++) {\n                options.value.push({\n                    value: res.data.data[i].name + '(' + res.data.data[i].department + ')',\n                    key: res.data.data[i].userId,\n                    name: res.data.data[i].name\n                })\n            }\n        } else {\n            message.error('获取失败！' + res.data.msg);\n        }\n    }).catch(err => {\n        message.error('请求失败！', err);\n    })\n}\n// 调用api-添加固定评估人\nconst handleEvaluatorOk = () => {\n    // 1、获取评估人key值\n    // 2、调用添加评测人接口\n    getAddEvaluatorApi(evaluator.value, evaluatorId.value).then(res => {\n        if (res.data.code === 200) {\n            message.success('添加固定评估人成功！^_^');\n            // 清空选择框\n            evaluator.value = '';\n            // 刷新列表\n            getScoreMatrix()\n            // 3、关闭弹窗\n            openEvaluator.value = false;\n            openDetail.value = false;\n        } else {\n            message.error('添加固定评估人失败！' + res.data.msg);\n        }\n    }).catch(err => {\n        console.log('请求失败！', err);\n    })\n};\n\n// 引用文件输入框 \nconst fileInput = ref(null);\n// 加载状态，控制加载动画\nconst loading = ref(false);\n\n// 触发文件选择框\nconst triggerFileInput = () => {\n    fileInput.value.click();\n};\n\n// 处理文件选择\nconst handleFileChange = (event) => {\n    const file = event.target.files[0];\n    if (file) {\n        // 开始上传时显示加载动画\n        loading.value = true;\n\n        // 调用上传接口\n        getMatrixExcelApi(file).then(res => {\n            // 请求成功后的操作\n            loading.value = false; // 隐藏加载动画\n            if (res.data.code === 200) {\n                message.success('文件上传成功~ =• ֊ •=');\n                // 刷新页面\n                setTimeout(() => {\n                    location.reload();\n                }, 100); // 延迟0.5秒刷新页面\n            } else {\n                message.error('文件上传失败，' + res.data.msg + '~Z☡zᶻ');\n            }\n        })\n            .catch(err => {\n                loading.value = false; // 隐藏加载动画\n                message.error('文件上传失败' + err);\n            });\n    }\n};\n\n// 发布矩阵关系\nconst getPushRelation = () => {\n    getPushRelationApi().then(res => {\n        if (res.data.code === 200) {\n            message.success('您已发布本轮评估矩阵关系!')\n            published.value = true\n        } else {\n            message.error('发布失败！' + res.data.msg)\n        }\n    }).catch(err => {\n        message.error('请求失败！' + err);\n    })\n}\n\n// 初始加载数据\nonMounted(() => {\n    getScoreMatrix()\n    getStepTime()\n    updateScrollHeight();\n    window.addEventListener('resize', updateScrollHeight);\n})\n\n// 在组件卸载时移除事件监听\nonUnmounted(() => {\n    window.removeEventListener('resize', updateScrollHeight);\n});\n</script>\n<template>\n    <div class=\"score-matrix\">\n        <!-- 表格顶部区域 -->\n        <div class=\"content-header\">\n            <!-- 搜索表单 -->\n            <div class=\"search-form\">\n                <a-form style=\"display: flex;align-items: center;\">\n                    <a-form-item style=\"margin-right: 10px;width:300px\">\n                        <a-input placeholder=\"请输入被评估人姓名\" v-model:value=\"serchInfo.name\" :allowClear=\"true\" />\n                    </a-form-item>\n                    <a-form-item>\n                        <a-button type=\"primary\" @click.prevent=\"searchSubmit\" class=\"seachBtn\">搜索</a-button>\n                    </a-form-item>\n                </a-form>\n            </div>\n            <!-- 右侧按钮 -->\n            <div class=\"submit-Btn\">\n                <a-button type=\"primary\" style=\"margin-right: 10px;\" @click=\"triggerFileInput\">导入数据</a-button>\n                <!-- <a-button type=\"primary\" style=\"margin-right: 10px;\">导出模板</a-button> -->\n                <a-popconfirm placement=\"bottom\" title=\"确定要发布本轮矩阵关系吗？\" ok-text=\"确定\" cancel-text=\"取消\"\n                    @confirm=\"getPushRelation()\">\n                    <a-button v-if=\"!published\" type=\"primary\" style=\"background-color: #39ba06;\">\n                        发布\n                    </a-button>\n                </a-popconfirm>\n                <a-button v-if=\"published\" type=\"primary\" disabled>\n                    已发布\n                </a-button>\n                <!-- 隐藏的文件上传输入框 -->\n                <input ref=\"fileInput\" type=\"file\" accept=\".xls,.xlsx\" style=\"display: none;\"\n                    @change=\"handleFileChange\" />\n\n                <!-- 显示加载动画 -->\n                <a-spin :spinning=\"loading\" class=\"loading-spin\" size=\"large\" />\n\n            </div>\n        </div>\n        <!-- 表格内容区域 -->\n        <div class=\"content-table\">\n            <!-- 表格 -->\n            <a-table :columns=\"columns\" :data-source=\"tableData\" :rowKey=\"record => record.key\"\n                :scroll=\"{ y: scrollHeight }\" :pagination=\"pagination\" :bordered=\"true\" @change=\"handleTableChange\">\n\n                <!-- 自定义渲染操作列 -->\n                <template v-slot:bodyCell=\"{ text, record, column }\">\n                    <!-- 检查当前列是否为操作列 -->\n                    <template v-if=\"column.key === 'action'\">\n                        <a-button type=\"text\" @click=\"showDetail(record)\" style=\"color: #0014B7;\">修改固定评估人</a-button>\n                    </template>\n                    <!-- 对其他列使用默认渲染 -->\n                    <template v-else>\n                        {{ text }}\n                    </template>\n                </template>\n            </a-table>\n            <!-- 查看详情弹窗 -->\n            <a-modal v-model:open=\"openDetail\" title=\"修改固定评估人\" :footer=\"null\">\n                <a-table :columns=\"columnsDetail\" :data-source=\"dataDetail\" :bordered=\"true\" :pagination=\"false\"\n                    :scroll=\"{ y: '60vh' }\">\n                    <template #bodyCell=\"{ column, record }\">\n                        <!-- 设置操作栏 -->\n                        <template v-if=\"column.key === 'action'\">\n                            <a-popconfirm title=\"确定要移除吗？\" ok-text=\"确定\" cancel-text=\"取消\" @confirm=\"delOne(record)\">\n                                <a style=\"color:#BD3124; font-weight: bold;\">\n                                    移除\n                                </a>\n                            </a-popconfirm>\n                        </template>\n                    </template>\n                </a-table>\n                <div class=\"actionBtn\">\n                    <a-button type=\"primary\" @click=\"showEvaluator\">添加评估人</a-button>\n                </div>\n            </a-modal>\n            <!-- 添加评估人弹窗 -->\n            <a-modal v-model:open=\"openEvaluator\" title=\"添加评估人\" @ok=\"handleEvaluatorOk\">\n                <a-select v-model:value=\"evaluator\" placeholder=\"请选择\" style=\"width: 100%\">\n                    <a-select-option v-for=\"item in options\" :key=\"item.key\" :value=\"item.key\">{{ item.value\n                        }}</a-select-option>\n                </a-select>\n            </a-modal>\n        </div>\n    </div>\n</template>\n\n<style lang=\"less\" scoped>\n.score-matrix {\n    // border: 1px solid red;\n    width: 100%;\n    height: 100%;\n}\n\n.content-header {\n    // border: 1px solid red;\n    display: flex;\n    align-items: center;\n    margin: 0px 10px 0px 10px;\n    height: 50px;\n\n    .submit-Btn {\n        margin-left: auto;\n        margin-bottom: 10px;\n    }\n}\n\n.content-table {\n    // border: 1px solid red;\n    height: calc(100% - 50px - 10px);\n    margin: 0 10px;\n}\n\n.actionBtn {\n    text-align: center;\n    /* 使按钮水平居中 */\n    margin-top: 10px;\n    /* 添加一些间距，让布局更美观 */\n}\n\n.loading-spin {\n    position: fixed;\n    /* 使得a-spin脱离正常文档流 */\n    top: 6%;\n    /* 距离顶部6% */\n    left: 50%;\n    /* 距离左边50% */\n    transform: translate(-50%, -50%);\n    /* 使用transform将a-spin精确居中 */\n    z-index: 9999;\n    /* 确保a-spin在最前面 */\n}\n\n.ant-form-item {\n    margin-bottom: 10px !important;\n}\n\n::v-deep .ant-table-tbody>tr>td {\n    padding: 8px;\n    /* 根据需要调整 */\n}\n</style>","import script from \"./ScoringMatrix.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ScoringMatrix.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./ScoringMatrix.vue?vue&type=style&index=0&id=3df7f0fc&lang=less&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.10_webpack@5.95.0/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3df7f0fc\"]])\n\nexport default __exports__"],"names":["getTodoListApi","pageNum","pageSize","Promise","resolve","reject","axios","method","url","headers","params","then","response","catch","error","getUserListApi","getEvaluatedListApi","userIds","data","JSON","stringify","getScoreMatrixApi","name","getAddEvaluatorApi","evaluatorId","userId","getDelEvaluatorApi","getMatrixExcelApi","file","formData","FormData","append","getPushRelationApi","published","ref","currentSession","getStepTime","getStepTimeApi","res","code","i","evaluateStep","length","enable","value","message","msg","err","console","log","serchInfo","reactive","searchSubmit","pagination","current","getScoreMatrix","total","showTotal","range","columns","title","dataIndex","key","fixed","align","width","tableData","scrollHeight","updateScrollHeight","screenHeight","window","innerHeight","containerHeight","Fixed","relationshipFixedList","Self","relationshipSelfList","FixedList","map","item","join","SelfList","push","index","supervisorName1","supervisorName2","supervisorName3","supervisorName4","relationshipFixed","relationshipSelf","handleTableChange","e","Number","openDetail","columnsDetail","dataDetail","showDetail","record","id","username","jobuNumber","workNum","department","delOne","findIndex","success","splice","openEvaluator","showEvaluator","getUserList","evaluator","options","handleEvaluatorOk","fileInput","loading","triggerFileInput","click","handleFileChange","event","target","files","setTimeout","location","reload","getPushRelation","onMounted","addEventListener","onUnmounted","removeEventListener","__exports__"],"sourceRoot":""}